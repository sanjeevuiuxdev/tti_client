{
    "sourceFile": "app/blog/[slug]/page.tsx ",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1762450384650,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1762453010213,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,171 +1,8 @@\n-import Link from \"next/link\";\n-import Image from \"next/image\";\n-import { notFound } from \"next/navigation\";\n-\n-type Blog = {\n-  _id: string;\n-  slug: string;\n-  title: string;\n-  postedBy?: string;\n-  mainImage?: { url?: string };\n-  category?: { name?: string; slug?: string };\n-  createdAt?: string;\n-  contentHtml?: string;\n-  metaTitle?: string;\n-  metaDescription?: string;\n-};\n-\n-const API = process.env.NEXT_PUBLIC_API_BASE!;\n-\n-// --- data helpers (SSR safe) ---\n-async function fetchJSON<T>(url: string): Promise<T> {\n-  const res = await fetch(url, { cache: \"no-store\" });\n-  if (!res.ok) throw new Error(await res.text());\n-  return res.json();\n-}\n-\n-async function getBlog(slug: string): Promise<Blog | null> {\n-  try {\n-    return await fetchJSON<Blog>(`${API}/api/blogs/${slug}`);\n-  } catch {\n-    return null;\n-  }\n-}\n-\n-function fmtDate(iso?: string) {\n-  if (!iso) return \"\";\n-  try {\n-    return new Date(iso).toLocaleDateString(\"en-GB\", {\n-      day: \"2-digit\",\n-      month: \"short\",\n-      year: \"numeric\",\n-    });\n-  } catch {\n-    return \"\";\n-  }\n-}\n-\n-export async function generateMetadata({ params }: { params: { slug: string } }) {\n-  const blog = await getBlog(params.slug);\n-  if (!blog) return {};\n-  return {\n-    title: blog.metaTitle || blog.title,\n-    description: blog.metaDescription || \"\",\n-    openGraph: {\n-      title: blog.metaTitle || blog.title,\n-      description: blog.metaDescription || \"\",\n-      type: \"article\",\n-      url: `/blog/${blog.slug}`,\n-      images: blog.mainImage?.url ? [blog.mainImage.url] : [],\n-    },\n-  };\n-}\n-\n-export default async function Page({ params }: { params: { slug: string } }) {\n-  const blog = await getBlog(params.slug);\n-  if (!blog) return notFound();\n-\n+export default function Page({ params }: { params: { slug: string } }) {\n   return (\n-    <>\n-      {/* Breadcrumb */}\n-      <div className=\"bg-surface2-color\">\n-        <div className=\"tf-container\">\n-          <ul className=\"breadcrumb text-caption-1 text_on-surface-color\">\n-            <li><Link href=\"/\" className=\"link\">Home</Link></li>\n-            <li>\n-              <Link href=\"/categories-1\">\n-                {blog.category?.name || \"Category\"}\n-              </Link>\n-            </li>\n-            <li>{blog.title}</li>\n-          </ul>\n-        </div>\n-      </div>\n-\n-      {/* Header block */}\n-      <div className=\"heading-post style-1\">\n-        <div className=\"tf-container\">\n-          <div className=\"post-inner\">\n-            <div className=\"content\">\n-              <div className=\"wrap-meta-feature d-flex align-items-center\">\n-                <span className=\"tag\">\n-                  <a className=\"text-title text_white\">\n-                    {blog.category?.name || \"CATEGORY\"}\n-                  </a>\n-                </span>\n-                <ul className=\"meta-feature fw-7 d-flex mb_16 text-body-1 mb-0 align-items-center\">\n-                  <li>{fmtDate(blog.createdAt)}</li>\n-                  <li>\n-                    <span className=\"text_secodary2-color\">POST BY</span>{\" \"}\n-                    <a className=\"link\">{blog.postedBy || \"\"}</a>\n-                  </li>\n-                </ul>\n-              </div>\n-              <h1 className=\"mb_20\">{blog.title}</h1>\n-              <div className=\"user-post d-flex align-items-center gap_20\">\n-                <div className=\"avatar\">\n-                  <img alt=\"avatar\" src=\"/images/avatar/avatar-1.jpg\" width={100} height={100} />\n-                </div>\n-                <p className=\"fw-7\">\n-                  <span className=\"text_secodary2-color\">Post by</span>{\" \"}\n-                  <a className=\"link\">{blog.postedBy || \"\"}</a>\n-                </p>\n-              </div>\n-            </div>\n-\n-            <div className=\"thumbs-post\">\n-              {blog.mainImage?.url ? (\n-                <Image\n-                  alt={blog.title}\n-                  src={blog.mainImage.url}\n-                  width={1350}\n-                  height={1013}\n-                  style={{ maxHeight: \"100vh\", objectFit: \"contain\" }}\n-                />\n-              ) : null}\n-            </div>\n-          </div>\n-        </div>\n-      </div>\n-\n-      {/* Content */}\n-      <div className=\"main-content\">\n-        <div className=\"single-post style-1\">\n-          <div className=\"tf-container\">\n-            <div className=\"row\">\n-              <div className=\"col-lg-2 lg-hide\">\n-                <div className=\"share-bar style-1 text-center sticky-top\">\n-                  <h5 className=\"mb_20\">Share This Post</h5>\n-                  <ul className=\"d-grid gap_10\">\n-                    {/* reuse your SocialShare2 if you want */}\n-                  </ul>\n-                </div>\n-              </div>\n-\n-              <div className=\"col-lg-10\">\n-                <div className=\"content-inner\">\n-                  <div className=\"wrap-post-details\">\n-                    <div className=\"post-details\">\n-                      {/* render HTML from admin editor */}\n-                      <div\n-                        className=\"post-body\"\n-                        dangerouslySetInnerHTML={{ __html: blog.contentHtml || \"\" }}\n-                      />\n-                    </div>\n-\n-                    {/* optional: your Comment + Sidebar components can stay if they don’t assume demo data */}\n-                    {/* <Comment /> */}\n-                  </div>\n-                  {/* <Sidebar /> */}\n-                </div>\n-              </div>\n-            </div>\n-          </div>\n-        </div>\n-\n-        {/* You can replace this with a related-by-category widget later */}\n-        {/* <RelatedBlogs /> */}\n-      </div>\n-    </>\n+    <div style={{padding: 24}}>\n+      <h1>Test blog page</h1>\n+      <p>slug: {params.slug}</p>\n+    </div>\n   );\n }\n"
                }
            ],
            "date": 1762450384650,
            "name": "Commit-0",
            "content": "import Link from \"next/link\";\nimport Image from \"next/image\";\nimport { notFound } from \"next/navigation\";\n\ntype Blog = {\n  _id: string;\n  slug: string;\n  title: string;\n  postedBy?: string;\n  mainImage?: { url?: string };\n  category?: { name?: string; slug?: string };\n  createdAt?: string;\n  contentHtml?: string;\n  metaTitle?: string;\n  metaDescription?: string;\n};\n\nconst API = process.env.NEXT_PUBLIC_API_BASE!;\n\n// --- data helpers (SSR safe) ---\nasync function fetchJSON<T>(url: string): Promise<T> {\n  const res = await fetch(url, { cache: \"no-store\" });\n  if (!res.ok) throw new Error(await res.text());\n  return res.json();\n}\n\nasync function getBlog(slug: string): Promise<Blog | null> {\n  try {\n    return await fetchJSON<Blog>(`${API}/api/blogs/${slug}`);\n  } catch {\n    return null;\n  }\n}\n\nfunction fmtDate(iso?: string) {\n  if (!iso) return \"\";\n  try {\n    return new Date(iso).toLocaleDateString(\"en-GB\", {\n      day: \"2-digit\",\n      month: \"short\",\n      year: \"numeric\",\n    });\n  } catch {\n    return \"\";\n  }\n}\n\nexport async function generateMetadata({ params }: { params: { slug: string } }) {\n  const blog = await getBlog(params.slug);\n  if (!blog) return {};\n  return {\n    title: blog.metaTitle || blog.title,\n    description: blog.metaDescription || \"\",\n    openGraph: {\n      title: blog.metaTitle || blog.title,\n      description: blog.metaDescription || \"\",\n      type: \"article\",\n      url: `/blog/${blog.slug}`,\n      images: blog.mainImage?.url ? [blog.mainImage.url] : [],\n    },\n  };\n}\n\nexport default async function Page({ params }: { params: { slug: string } }) {\n  const blog = await getBlog(params.slug);\n  if (!blog) return notFound();\n\n  return (\n    <>\n      {/* Breadcrumb */}\n      <div className=\"bg-surface2-color\">\n        <div className=\"tf-container\">\n          <ul className=\"breadcrumb text-caption-1 text_on-surface-color\">\n            <li><Link href=\"/\" className=\"link\">Home</Link></li>\n            <li>\n              <Link href=\"/categories-1\">\n                {blog.category?.name || \"Category\"}\n              </Link>\n            </li>\n            <li>{blog.title}</li>\n          </ul>\n        </div>\n      </div>\n\n      {/* Header block */}\n      <div className=\"heading-post style-1\">\n        <div className=\"tf-container\">\n          <div className=\"post-inner\">\n            <div className=\"content\">\n              <div className=\"wrap-meta-feature d-flex align-items-center\">\n                <span className=\"tag\">\n                  <a className=\"text-title text_white\">\n                    {blog.category?.name || \"CATEGORY\"}\n                  </a>\n                </span>\n                <ul className=\"meta-feature fw-7 d-flex mb_16 text-body-1 mb-0 align-items-center\">\n                  <li>{fmtDate(blog.createdAt)}</li>\n                  <li>\n                    <span className=\"text_secodary2-color\">POST BY</span>{\" \"}\n                    <a className=\"link\">{blog.postedBy || \"\"}</a>\n                  </li>\n                </ul>\n              </div>\n              <h1 className=\"mb_20\">{blog.title}</h1>\n              <div className=\"user-post d-flex align-items-center gap_20\">\n                <div className=\"avatar\">\n                  <img alt=\"avatar\" src=\"/images/avatar/avatar-1.jpg\" width={100} height={100} />\n                </div>\n                <p className=\"fw-7\">\n                  <span className=\"text_secodary2-color\">Post by</span>{\" \"}\n                  <a className=\"link\">{blog.postedBy || \"\"}</a>\n                </p>\n              </div>\n            </div>\n\n            <div className=\"thumbs-post\">\n              {blog.mainImage?.url ? (\n                <Image\n                  alt={blog.title}\n                  src={blog.mainImage.url}\n                  width={1350}\n                  height={1013}\n                  style={{ maxHeight: \"100vh\", objectFit: \"contain\" }}\n                />\n              ) : null}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"main-content\">\n        <div className=\"single-post style-1\">\n          <div className=\"tf-container\">\n            <div className=\"row\">\n              <div className=\"col-lg-2 lg-hide\">\n                <div className=\"share-bar style-1 text-center sticky-top\">\n                  <h5 className=\"mb_20\">Share This Post</h5>\n                  <ul className=\"d-grid gap_10\">\n                    {/* reuse your SocialShare2 if you want */}\n                  </ul>\n                </div>\n              </div>\n\n              <div className=\"col-lg-10\">\n                <div className=\"content-inner\">\n                  <div className=\"wrap-post-details\">\n                    <div className=\"post-details\">\n                      {/* render HTML from admin editor */}\n                      <div\n                        className=\"post-body\"\n                        dangerouslySetInnerHTML={{ __html: blog.contentHtml || \"\" }}\n                      />\n                    </div>\n\n                    {/* optional: your Comment + Sidebar components can stay if they don’t assume demo data */}\n                    {/* <Comment /> */}\n                  </div>\n                  {/* <Sidebar /> */}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* You can replace this with a related-by-category widget later */}\n        {/* <RelatedBlogs /> */}\n      </div>\n    </>\n  );\n}\n"
        }
    ]
}