{
    "sourceFile": "app/blog/[slug]/page.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 22,
            "patches": [
                {
                    "date": 1762454339262,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1762455311504,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,186 +1,143 @@\n // app/blog/[slug]/page.tsx\n+import Link from \"next/link\";\n import Image from \"next/image\";\n-import Link from \"next/link\";\n import { notFound } from \"next/navigation\";\n \n import Header1 from \"@/components/headers/Header1\";\n import Footer1 from \"@/components/footers/Footer1\";\n import Sidebar from \"@/components/blog-single/Sidebar\";\n import SocialShare2 from \"@/components/blog-single/SocialShare2\";\n-import Comment from \"@/components/blog-single/Comment\";\n-import BlogCard1 from \"@/components/blog-cards/BlogCard1\";\n+import RelatedBlogs from \"@/components/blog-single/RelatedBlogs\";\n \n type Blog = {\n   _id: string;\n   slug: string;\n   title: string;\n   postedBy?: string;\n   mainImage?: { url?: string };\n-  category?: { name?: string; slug?: string; _id?: string };\n-  contentHtml?: string;\n+  contentHtml: string;\n+  category?: { name: string; slug?: string };\n   createdAt?: string;\n-  metaTitle?: string;\n-  metaDescription?: string;\n };\n \n const API = process.env.NEXT_PUBLIC_API_BASE!;\n \n-// ---- helpers ----\n-async function fetchJSON<T>(url: string, revalidate = 120): Promise<T> {\n-  const res = await fetch(url, { next: { revalidate } });\n-  if (res.status === 404) throw new Error(\"404\");\n-  if (!res.ok) throw new Error(await res.text());\n-  return res.json();\n+async function getBlog(slug: string): Promise<Blog | null> {\n+  const r = await fetch(`${API}/api/blogs/${slug}`, { cache: \"no-store\" });\n+  if (!r.ok) return null;\n+  return r.json();\n }\n \n-function toCardPost(b: Blog) {\n-  const imageUrl = b.mainImage?.url || \"\";\n-  return {\n-    id: b._id,                 // widget may read id but we link with slug\n-    slug: b.slug,\n-    href: `/blog/${b.slug}`,\n-    title: b.title,\n-    author: b.postedBy || \"\",\n-    date: new Date(b.createdAt || \"\").toDateString(),\n-    category: b.category?.name || \"\",\n-    imgSrc: imageUrl,\n-    image: imageUrl,\n-    img: imageUrl,\n-    thumb: imageUrl,\n-  };\n+// simple related by same category (exclude current)\n+async function getRelated(categorySlug?: string, currentSlug?: string) {\n+  if (!categorySlug) return [];\n+  const r = await fetch(\n+    `${API}/api/blogs?category=${encodeURIComponent(categorySlug)}&limit=6`,\n+    { cache: \"no-store\" }\n+  );\n+  if (!r.ok) return [];\n+  const rows: Blog[] = await r.json();\n+  return rows.filter(b => b.slug !== currentSlug).slice(0, 4);\n }\n \n-// ---- SEO ----\n export async function generateMetadata({ params }: { params: { slug: string } }) {\n-  try {\n-    const blog = await fetchJSON<Blog>(`${API}/api/blogs/${params.slug}`, 60);\n-    return {\n-      title: blog.metaTitle || blog.title,\n-      description: blog.metaDescription || blog.title,\n-      openGraph: {\n-        title: blog.metaTitle || blog.title,\n-        description: blog.metaDescription || blog.title,\n-        type: \"article\",\n-        url: `/blog/${blog.slug}`,\n-        images: blog.mainImage?.url ? [{ url: blog.mainImage.url }] : undefined,\n-      },\n-    };\n-  } catch {\n-    return { title: \"Not found\" };\n-  }\n+  const blog = await getBlog(params.slug);\n+  if (!blog) return {};\n+  return {\n+    title: `${blog.title} || Drozy - Modern Blog & Magazine`,\n+    description: blog.category?.name || \"Blog article\",\n+    openGraph: {\n+      title: blog.title,\n+      description: blog.category?.name || \"Blog article\",\n+      type: \"article\",\n+      url: `/blog/${blog.slug}`,\n+      images: blog.mainImage?.url ? [blog.mainImage.url] : undefined,\n+    },\n+  };\n }\n \n-// ---- page ----\n export default async function Page({ params }: { params: { slug: string } }) {\n-  // 1) current post\n-  let blog: Blog | null = null;\n-  try {\n-    blog = await fetchJSON<Blog>(`${API}/api/blogs/${params.slug}`, 60);\n-  } catch {\n-    return notFound();\n-  }\n+  const blog = await getBlog(params.slug);\n   if (!blog) return notFound();\n \n-  // 2) load some recent posts to compute prev/next + related\n-  const all = await fetchJSON<Blog[]>(`${API}/api/blogs?limit=50`, 60);\n+  const related = await getRelated(blog.category?.slug, blog.slug);\n \n-  // sort newest -> oldest\n-  const sorted = [...all].sort(\n-    (a, b) => new Date(b.createdAt || 0).getTime() - new Date(a.createdAt || 0).getTime()\n-  );\n-  const idx = sorted.findIndex((p) => p.slug === blog!.slug);\n-  const prevBlog = idx > 0 ? sorted[idx - 1] : null;\n-  const nextBlog = idx >= 0 && idx < sorted.length - 1 ? sorted[idx + 1] : null;\n-\n-  // 3) related by category (exclude current)\n-  const related = sorted\n-    .filter(\n-      (p) =>\n-        p.slug !== blog!.slug &&\n-        (p.category?._id && blog!.category?._id\n-          ? p.category!._id === blog!.category!._id\n-          : p.category?.name === blog!.category?.name)\n-    )\n-    .slice(0, 6);\n-\n   return (\n     <>\n       <Header1 />\n \n       {/* breadcrumb */}\n       <div className=\"bg-surface2-color\">\n         <div className=\"tf-container\">\n           <ul className=\"breadcrumb text-caption-1 text_on-surface-color\">\n+            <li><Link href=\"/\" className=\"link\">Home</Link></li>\n             <li>\n-              <Link href=\"/\" className=\"link\">Home</Link>\n-            </li>\n-            <li>\n-              {/* If you build a real category page later, swap the href */}\n-              <Link href={`/categories-1`} className=\"link\">\n+              <Link href=\"/categories-1\" className=\"link\">\n                 {blog.category?.name || \"Category\"}\n               </Link>\n             </li>\n             <li>{blog.title}</li>\n           </ul>\n         </div>\n       </div>\n \n-      {/* heading-post */}\n+      {/* heading-post (hero) */}\n       <div className=\"heading-post style-1\">\n         <div className=\"tf-container\">\n           <div className=\"post-inner\">\n             <div className=\"content\">\n               <div className=\"wrap-meta-feature d-flex align-items-center\">\n                 <span className=\"tag\">\n                   <a className=\"text-title text_white\">\n-                    {blog.category?.name || \"General\"}\n+                    {blog.category?.name || \"CATEGORY\"}\n                   </a>\n                 </span>\n                 <ul className=\"meta-feature fw-7 d-flex mb_16 text-body-1 mb-0 align-items-center\">\n-                  <li>{new Date(blog.createdAt || \"\").toDateString()}</li>\n                   <li>\n+                    {new Date(blog.createdAt || Date.now()).toLocaleDateString(\n+                      undefined,\n+                      { year: \"numeric\", month: \"long\", day: \"numeric\" }\n+                    )}\n+                  </li>\n+                  <li>\n                     <span className=\"text_secodary2-color\">POST BY</span>{\" \"}\n-                    <a className=\"link\">{blog.postedBy || \"Admin\"}</a>\n+                    <a className=\"link\">{blog.postedBy || \"Author\"}</a>\n                   </li>\n                 </ul>\n               </div>\n               <h1 className=\"mb_20\">{blog.title}</h1>\n-\n               <div className=\"user-post d-flex align-items-center gap_20\">\n                 <div className=\"avatar\">\n                   <img alt=\"avatar\" src=\"/images/avatar/avatar-1.jpg\" width={100} height={100} />\n                 </div>\n                 <p className=\"fw-7\">\n                   <span className=\"text_secodary2-color\">Post by</span>{\" \"}\n-                  <a className=\"link\">{blog.postedBy || \"Admin\"}</a>\n+                  <a className=\"link\">{blog.postedBy || \"Author\"}</a>\n                 </p>\n               </div>\n             </div>\n \n-            {blog.mainImage?.url && (\n-              <div className=\"thumbs-post\">\n-                <Image\n-                  className=\"lazyload\"\n-                  alt={blog.title}\n-                  src={blog.mainImage.url}\n-                  width={1350}\n-                  height={1013}\n-                  style={{ maxHeight: \"100vh\", objectFit: \"contain\" }}\n-                  priority\n-                />\n-              </div>\n-            )}\n+            <div className=\"thumbs-post\">\n+              <Image\n+                className=\"lazyload\"\n+                alt={blog.title}\n+                src={blog.mainImage?.url || \"/images/feature-post/thumbs-main-post-1.webp\"}\n+                width={1350}\n+                height={1013}\n+                style={{ maxHeight: \"100vh\", objectFit: \"contain\" }}\n+              />\n+            </div>\n           </div>\n         </div>\n       </div>\n \n-      {/* main */}\n+      {/* main content grid */}\n       <div className=\"main-content\">\n         <div className=\"single-post style-1\">\n           <div className=\"tf-container\">\n             <div className=\"row\">\n-              {/* share bar (left) */}\n+              {/* left share column */}\n               <div className=\"col-lg-2 lg-hide\">\n                 <div className=\"share-bar style-1 text-center sticky-top\">\n                   <h5 className=\"mb_20\">Share This Post</h5>\n                   <ul className=\"d-grid gap_10\">\n@@ -188,74 +145,56 @@\n                   </ul>\n                 </div>\n               </div>\n \n-              {/* content + sidebar */}\n-              <div className=\"col-lg-10\">\n+              {/* center: article + comments/form */}\n+              <div className=\"col-lg-7\">\n                 <div className=\"content-inner\">\n                   <div className=\"wrap-post-details\">\n-                    <div\n-                      className=\"post-details\"\n-                      dangerouslySetInnerHTML={{ __html: blog.contentHtml || \"\" }}\n-                    />\n+                    <div className=\"post-details\">\n+                      {/* render HTML from the editor */}\n+                      <div\n+                        className=\"post-details__html\"\n+                        dangerouslySetInnerHTML={{ __html: blog.contentHtml }}\n+                      />\n+                    </div>\n \n-                    {/* prev / next */}\n-                    <div className=\"tf-article-navigation\">\n-                      {prevBlog ? (\n-                        <div className=\"item prev\">\n-                          <Link\n-                            href={`/blog/${prevBlog.slug}`}\n-                            className=\"hover-underline-link text-body-1 text_on-surface-color fw-7 mb_12\"\n-                          >\n-                            Previous\n-                          </Link>\n-                          <h6>\n-                            <Link href={`/blog/${prevBlog.slug}`} className=\"link line-clamp-2\">\n-                              {prevBlog.title}\n-                            </Link>\n-                          </h6>\n-                        </div>\n-                      ) : null}\n+                    {/* Prev/Next (optional simple) */}\n+                    {/* keep your existing nav if you want; omitted here to stay focused */}\n+                  </div>\n \n-                      {nextBlog ? (\n-                        <div className=\"item next\">\n-                          <Link\n-                            href={`/blog/${nextBlog.slug}`}\n-                            className=\"hover-underline-link text-body-1 text_on-surface-color fw-7 mb_12\"\n-                          >\n-                            Next\n-                          </Link>\n-                          <h6>\n-                            <Link href={`/blog/${nextBlog.slug}`} className=\"link line-clamp-2\">\n-                              {nextBlog.title}\n-                            </Link>\n-                          </h6>\n-                        </div>\n-                      ) : null}\n+                  {/* Comments + form block from your template */}\n+                  <div className=\"row mt_40\">\n+                    <div className=\"col-lg-12\">\n+                      {/* Your Comment component already renders the two-column (list + form) block */}\n+                      {/* If yours expects props, wire them here. */}\n+                      {/* <Comment /> */}\n                     </div>\n                   </div>\n-\n-                  {/* comments + sidebar (keep your existing components) */}\n-                  <Comment />\n-                  <Sidebar />\n                 </div>\n               </div>\n+\n+              {/* right: sidebar */}\n+              <div className=\"col-lg-3\">\n+                <Sidebar />\n+              </div>\n             </div>\n           </div>\n         </div>\n \n-        {/* Related Posts by category */}\n-        <div className=\"tf-container\">\n-          <div className=\"heading-section mb_28\">\n-            <h3 className=\"title\">Related Posts</h3>\n-          </div>\n-          <div className=\"tf-grid-layout xxl-col-4 sm-col-2\">\n-            {related.map((b) => {\n-              const card = toCardPost(b);\n-              return <BlogCard1 key={b._id} post={card as any} />;\n-            })}\n-          </div>\n-        </div>\n+        {/* related by category */}\n+        <RelatedBlogs\n+          // expects array of posts shaped like your cards\n+          posts={related.map((b) => ({\n+            id: b._id,\n+            title: b.title,\n+            author: b.postedBy || \"\",\n+            imgSrc: b.mainImage?.url || \"\",\n+            category: b.category?.name || \"\",\n+            href: `/blog/${b.slug}`,\n+          }))}\n+          title=\"Related Posts\"\n+        />\n       </div>\n \n       <Footer1 parentClass=\"tf-container\" />\n     </>\n"
                },
                {
                    "date": 1762456018305,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,9 +6,10 @@\n import Header1 from \"@/components/headers/Header1\";\n import Footer1 from \"@/components/footers/Footer1\";\n import Sidebar from \"@/components/blog-single/Sidebar\";\n import SocialShare2 from \"@/components/blog-single/SocialShare2\";\n-import RelatedBlogs from \"@/components/blog-single/RelatedBlogs\";\n+import Comment from \"@/components/blog-single/Comment\";\n+import BlogCard1 from \"@/components/blog-cards/BlogCard1\";\n \n type Blog = {\n   _id: string;\n   slug: string;\n@@ -21,28 +22,32 @@\n };\n \n const API = process.env.NEXT_PUBLIC_API_BASE!;\n \n-async function getBlog(slug: string): Promise<Blog | null> {\n+// ------- helpers -------\n+async function fetchBlog(slug: string): Promise<Blog | null> {\n   const r = await fetch(`${API}/api/blogs/${slug}`, { cache: \"no-store\" });\n   if (!r.ok) return null;\n   return r.json();\n }\n \n-// simple related by same category (exclude current)\n-async function getRelated(categorySlug?: string, currentSlug?: string) {\n-  if (!categorySlug) return [];\n-  const r = await fetch(\n-    `${API}/api/blogs?category=${encodeURIComponent(categorySlug)}&limit=6`,\n-    { cache: \"no-store\" }\n-  );\n+// We fetch a chunk then filter by category locally (your backend list route\n+// doesn’t support ?category yet).\n+async function fetchRelated(catName?: string, catSlug?: string, currentSlug?: string) {\n+  const r = await fetch(`${API}/api/blogs?limit=100`, { cache: \"no-store\" });\n   if (!r.ok) return [];\n   const rows: Blog[] = await r.json();\n-  return rows.filter(b => b.slug !== currentSlug).slice(0, 4);\n+  return rows\n+    .filter(\n+      (b) =>\n+        b.slug !== currentSlug &&\n+        (b.category?.slug === catSlug || b.category?.name === catName)\n+    )\n+    .slice(0, 4);\n }\n \n export async function generateMetadata({ params }: { params: { slug: string } }) {\n-  const blog = await getBlog(params.slug);\n+  const blog = await fetchBlog(params.slug);\n   if (!blog) return {};\n   return {\n     title: `${blog.title} || Drozy - Modern Blog & Magazine`,\n     description: blog.category?.name || \"Blog article\",\n@@ -55,13 +60,18 @@\n     },\n   };\n }\n \n+// ------- page -------\n export default async function Page({ params }: { params: { slug: string } }) {\n-  const blog = await getBlog(params.slug);\n+  const blog = await fetchBlog(params.slug);\n   if (!blog) return notFound();\n \n-  const related = await getRelated(blog.category?.slug, blog.slug);\n+  const related = await fetchRelated(\n+    blog.category?.name,\n+    blog.category?.slug,\n+    blog.slug\n+  );\n \n   return (\n     <>\n       <Header1 />\n@@ -69,10 +79,12 @@\n       {/* breadcrumb */}\n       <div className=\"bg-surface2-color\">\n         <div className=\"tf-container\">\n           <ul className=\"breadcrumb text-caption-1 text_on-surface-color\">\n-            <li><Link href=\"/\" className=\"link\">Home</Link></li>\n             <li>\n+              <Link href=\"/\" className=\"link\">Home</Link>\n+            </li>\n+            <li>\n               <Link href=\"/categories-1\" className=\"link\">\n                 {blog.category?.name || \"Category\"}\n               </Link>\n             </li>\n@@ -80,25 +92,22 @@\n           </ul>\n         </div>\n       </div>\n \n-      {/* heading-post (hero) */}\n+      {/* hero */}\n       <div className=\"heading-post style-1\">\n         <div className=\"tf-container\">\n           <div className=\"post-inner\">\n             <div className=\"content\">\n               <div className=\"wrap-meta-feature d-flex align-items-center\">\n                 <span className=\"tag\">\n-                  <a className=\"text-title text_white\">\n-                    {blog.category?.name || \"CATEGORY\"}\n-                  </a>\n+                  <a className=\"text-title text_white\">{blog.category?.name || \"CATEGORY\"}</a>\n                 </span>\n                 <ul className=\"meta-feature fw-7 d-flex mb_16 text-body-1 mb-0 align-items-center\">\n                   <li>\n-                    {new Date(blog.createdAt || Date.now()).toLocaleDateString(\n-                      undefined,\n-                      { year: \"numeric\", month: \"long\", day: \"numeric\" }\n-                    )}\n+                    {new Date(blog.createdAt || Date.now()).toLocaleDateString(undefined, {\n+                      year: \"numeric\", month: \"long\", day: \"numeric\",\n+                    })}\n                   </li>\n                   <li>\n                     <span className=\"text_secodary2-color\">POST BY</span>{\" \"}\n                     <a className=\"link\">{blog.postedBy || \"Author\"}</a>\n@@ -130,14 +139,14 @@\n           </div>\n         </div>\n       </div>\n \n-      {/* main content grid */}\n+      {/* main grid (keeps template layout) */}\n       <div className=\"main-content\">\n         <div className=\"single-post style-1\">\n           <div className=\"tf-container\">\n             <div className=\"row\">\n-              {/* left share column */}\n+              {/* left share */}\n               <div className=\"col-lg-2 lg-hide\">\n                 <div className=\"share-bar style-1 text-center sticky-top\">\n                   <h5 className=\"mb_20\">Share This Post</h5>\n                   <ul className=\"d-grid gap_10\">\n@@ -145,56 +154,57 @@\n                   </ul>\n                 </div>\n               </div>\n \n-              {/* center: article + comments/form */}\n+              {/* center column: article + comments */}\n               <div className=\"col-lg-7\">\n                 <div className=\"content-inner\">\n                   <div className=\"wrap-post-details\">\n                     <div className=\"post-details\">\n-                      {/* render HTML from the editor */}\n                       <div\n                         className=\"post-details__html\"\n                         dangerouslySetInnerHTML={{ __html: blog.contentHtml }}\n                       />\n                     </div>\n-\n-                    {/* Prev/Next (optional simple) */}\n-                    {/* keep your existing nav if you want; omitted here to stay focused */}\n                   </div>\n \n-                  {/* Comments + form block from your template */}\n-                  <div className=\"row mt_40\">\n-                    <div className=\"col-lg-12\">\n-                      {/* Your Comment component already renders the two-column (list + form) block */}\n-                      {/* If yours expects props, wire them here. */}\n-                      {/* <Comment /> */}\n-                    </div>\n-                  </div>\n+                  {/* COMMENTS + FORM (from your template) */}\n+                  <Comment />\n                 </div>\n               </div>\n \n-              {/* right: sidebar */}\n+              {/* right sidebar */}\n               <div className=\"col-lg-3\">\n                 <Sidebar />\n               </div>\n             </div>\n           </div>\n         </div>\n \n-        {/* related by category */}\n-        <RelatedBlogs\n-          // expects array of posts shaped like your cards\n-          posts={related.map((b) => ({\n-            id: b._id,\n-            title: b.title,\n-            author: b.postedBy || \"\",\n-            imgSrc: b.mainImage?.url || \"\",\n-            category: b.category?.name || \"\",\n-            href: `/blog/${b.slug}`,\n-          }))}\n-          title=\"Related Posts\"\n-        />\n+        {/* Related Posts (dynamic by category) */}\n+        {related.length > 0 && (\n+          <div className=\"tf-container mt_40\">\n+            <div className=\"heading-section mb_28\">\n+              <h3 className=\"title\">Related Posts</h3>\n+            </div>\n+            <div className=\"tf-grid-layout lg-col-3\">\n+              {related.map((b) => (\n+                <BlogCard1\n+                  key={b._id}\n+                  post={{\n+                    id: b._id,\n+                    title: b.title,\n+                    author: b.postedBy || \"\",\n+                    category: b.category?.name || \"\",\n+                    date: new Date(b.createdAt || Date.now()).toLocaleDateString(),\n+                    imgSrc: b.mainImage?.url || \"\",\n+                    href: `/blog/${b.slug}`,\n+                  }}\n+                />\n+              ))}\n+            </div>\n+          </div>\n+        )}\n       </div>\n \n       <Footer1 parentClass=\"tf-container\" />\n     </>\n"
                },
                {
                    "date": 1762456312703,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -166,10 +166,9 @@\n                       />\n                     </div>\n                   </div>\n \n-                  {/* COMMENTS + FORM (from your template) */}\n-                  <Comment />\n+                  \n                 </div>\n               </div>\n \n               {/* right sidebar */}\n"
                },
                {
                    "date": 1762456445106,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -164,8 +164,10 @@\n                         className=\"post-details__html\"\n                         dangerouslySetInnerHTML={{ __html: blog.contentHtml }}\n                       />\n                     </div>\n+                    {/* COMMENTS + FORM (from your template) */}\n+                  <Comment />\n                   </div>\n \n                   \n                 </div>\n@@ -180,9 +182,9 @@\n         </div>\n \n         {/* Related Posts (dynamic by category) */}\n         {related.length > 0 && (\n-          <div className=\"tf-container mt_40\">\n+          <div className=\"tf-container sw-layout tf-spacing-8\">\n             <div className=\"heading-section mb_28\">\n               <h3 className=\"title\">Related Posts</h3>\n             </div>\n             <div className=\"tf-grid-layout lg-col-3\">\n"
                },
                {
                    "date": 1762458601486,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -165,9 +165,9 @@\n                         dangerouslySetInnerHTML={{ __html: blog.contentHtml }}\n                       />\n                     </div>\n                     {/* COMMENTS + FORM (from your template) */}\n-                  <Comment />\n+                  <Comment postId={blog._id}/>\n                   </div>\n \n                   \n                 </div>\n"
                },
                {
                    "date": 1762541129442,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -80,9 +80,9 @@\n       <div className=\"bg-surface2-color\">\n         <div className=\"tf-container\">\n           <ul className=\"breadcrumb text-caption-1 text_on-surface-color\">\n             <li>\n-              <Link href=\"/\" className=\"link\">Home</Link>\n+              <Link href=\"/\" className=\"link\">Homedscx</Link>\n             </li>\n             <li>\n               <Link href=\"/categories-1\" className=\"link\">\n                 {blog.category?.name || \"Category\"}\n"
                },
                {
                    "date": 1762541155517,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -80,9 +80,9 @@\n       <div className=\"bg-surface2-color\">\n         <div className=\"tf-container\">\n           <ul className=\"breadcrumb text-caption-1 text_on-surface-color\">\n             <li>\n-              <Link href=\"/\" className=\"link\">Homedscx</Link>\n+              <Link href=\"/\" className=\"link\">Home</Link>\n             </li>\n             <li>\n               <Link href=\"/categories-1\" className=\"link\">\n                 {blog.category?.name || \"Category\"}\n"
                },
                {
                    "date": 1762629257528,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -207,7 +207,15 @@\n         )}\n       </div>\n \n       <Footer1 parentClass=\"tf-container\" />\n+\n+      {post.schemaMarkup && (\n+  <script\n+    type=\"application/ld+json\"\n+    dangerouslySetInnerHTML={{ __html: post.schemaMarkup }}\n+  />\n+)}\n+\n     </>\n   );\n }\n"
                },
                {
                    "date": 1762629279171,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -208,14 +208,8 @@\n       </div>\n \n       <Footer1 parentClass=\"tf-container\" />\n \n-      {post.schemaMarkup && (\n-  <script\n-    type=\"application/ld+json\"\n-    dangerouslySetInnerHTML={{ __html: post.schemaMarkup }}\n-  />\n-)}\n-\n+      \n     </>\n   );\n }\n"
                },
                {
                    "date": 1762629833689,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,8 +18,9 @@\n   mainImage?: { url?: string };\n   contentHtml: string;\n   category?: { name: string; slug?: string };\n   createdAt?: string;\n+  schemaMarkup?: string;\n };\n \n const API = process.env.NEXT_PUBLIC_API_BASE!;\n \n"
                },
                {
                    "date": 1762629840545,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,9 @@\n // app/blog/[slug]/page.tsx\n import Link from \"next/link\";\n import Image from \"next/image\";\n import { notFound } from \"next/navigation\";\n+import Script from \"next/script\";\n \n import Header1 from \"@/components/headers/Header1\";\n import Footer1 from \"@/components/footers/Footer1\";\n import Sidebar from \"@/components/blog-single/Sidebar\";\n"
                },
                {
                    "date": 1762629858295,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -76,8 +76,17 @@\n \n   return (\n     <>\n       <Header1 />\n+      {/* JSON-LD (from backend textarea) */}\n+{blog.schemaMarkup ? (\n+  <Script\n+    id={`schema-${blog.slug}`}\n+    type=\"application/ld+json\"\n+    strategy=\"afterInteractive\"\n+    dangerouslySetInnerHTML={{ __html: blog.schemaMarkup }}\n+  />\n+) : null}\n \n       {/* breadcrumb */}\n       <div className=\"bg-surface2-color\">\n         <div className=\"tf-container\">\n"
                },
                {
                    "date": 1762770231252,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -63,9 +63,9 @@\n   };\n }\n \n // ------- page -------\n-export default async function Page({ params }: { params: { slug: string } }) {\n+export default async function Page({ params }: { params: Promise<{ slug: string } }) {\n   const blog = await fetchBlog(params.slug);\n   if (!blog) return notFound();\n \n   const related = await fetchRelated(\n"
                },
                {
                    "date": 1762770242882,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -63,9 +63,9 @@\n   };\n }\n \n // ------- page -------\n-export default async function Page({ params }: { params: Promise<{ slug: string } }) {\n+export default async function Page({ params }: { params: Promise<{ slug: string }> }) {\n   const blog = await fetchBlog(params.slug);\n   if (!blog) return notFound();\n \n   const related = await fetchRelated(\n"
                },
                {
                    "date": 1762773765203,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,8 +9,9 @@\n import Sidebar from \"@/components/blog-single/Sidebar\";\n import SocialShare2 from \"@/components/blog-single/SocialShare2\";\n import Comment from \"@/components/blog-single/Comment\";\n import BlogCard1 from \"@/components/blog-cards/BlogCard1\";\n+import type { PageProps } from \"next\";\n \n type Blog = {\n   _id: string;\n   slug: string;\n@@ -31,10 +32,8 @@\n   if (!r.ok) return null;\n   return r.json();\n }\n \n-// We fetch a chunk then filter by category locally (your backend list route\n-// doesn’t support ?category yet).\n async function fetchRelated(catName?: string, catSlug?: string, currentSlug?: string) {\n   const r = await fetch(`${API}/api/blogs?limit=100`, { cache: \"no-store\" });\n   if (!r.ok) return [];\n   const rows: Blog[] = await r.json();\n@@ -46,10 +45,12 @@\n     )\n     .slice(0, 4);\n }\n \n-export async function generateMetadata({ params }: { params: { slug: string } }) {\n-  const blog = await fetchBlog(params.slug);\n+// ------- metadata -------\n+export async function generateMetadata({ params }: PageProps<{ slug: string }>) {\n+  const { slug } = await params; // ✅ must await in Next 15\n+  const blog = await fetchBlog(slug);\n   if (!blog) return {};\n   return {\n     title: `${blog.title} || Drozy - Modern Blog & Magazine`,\n     description: blog.category?.name || \"Blog article\",\n@@ -63,10 +64,11 @@\n   };\n }\n \n // ------- page -------\n-export default async function Page({ params }: { params: Promise<{ slug: string }> }) {\n-  const blog = await fetchBlog(params.slug);\n+export default async function Page({ params }: PageProps<{ slug: string }>) {\n+  const { slug } = await params; // ✅ must await\n+  const blog = await fetchBlog(slug);\n   if (!blog) return notFound();\n \n   const related = await fetchRelated(\n     blog.category?.name,\n@@ -76,24 +78,27 @@\n \n   return (\n     <>\n       <Header1 />\n+\n       {/* JSON-LD (from backend textarea) */}\n-{blog.schemaMarkup ? (\n-  <Script\n-    id={`schema-${blog.slug}`}\n-    type=\"application/ld+json\"\n-    strategy=\"afterInteractive\"\n-    dangerouslySetInnerHTML={{ __html: blog.schemaMarkup }}\n-  />\n-) : null}\n+      {blog.schemaMarkup ? (\n+        <Script\n+          id={`schema-${blog.slug}`}\n+          type=\"application/ld+json\"\n+          strategy=\"afterInteractive\"\n+          dangerouslySetInnerHTML={{ __html: blog.schemaMarkup }}\n+        />\n+      ) : null}\n \n       {/* breadcrumb */}\n       <div className=\"bg-surface2-color\">\n         <div className=\"tf-container\">\n           <ul className=\"breadcrumb text-caption-1 text_on-surface-color\">\n             <li>\n-              <Link href=\"/\" className=\"link\">Home</Link>\n+              <Link href=\"/\" className=\"link\">\n+                Home\n+              </Link>\n             </li>\n             <li>\n               <Link href=\"/categories-1\" className=\"link\">\n                 {blog.category?.name || \"Category\"}\n@@ -110,15 +115,18 @@\n           <div className=\"post-inner\">\n             <div className=\"content\">\n               <div className=\"wrap-meta-feature d-flex align-items-center\">\n                 <span className=\"tag\">\n-                  <a className=\"text-title text_white\">{blog.category?.name || \"CATEGORY\"}</a>\n+                  <a className=\"text-title text_white\">\n+                    {blog.category?.name || \"CATEGORY\"}\n+                  </a>\n                 </span>\n                 <ul className=\"meta-feature fw-7 d-flex mb_16 text-body-1 mb-0 align-items-center\">\n                   <li>\n-                    {new Date(blog.createdAt || Date.now()).toLocaleDateString(undefined, {\n-                      year: \"numeric\", month: \"long\", day: \"numeric\",\n-                    })}\n+                    {new Date(blog.createdAt || Date.now()).toLocaleDateString(\n+                      undefined,\n+                      { year: \"numeric\", month: \"long\", day: \"numeric\" }\n+                    )}\n                   </li>\n                   <li>\n                     <span className=\"text_secodary2-color\">POST BY</span>{\" \"}\n                     <a className=\"link\">{blog.postedBy || \"Author\"}</a>\n@@ -127,9 +135,14 @@\n               </div>\n               <h1 className=\"mb_20\">{blog.title}</h1>\n               <div className=\"user-post d-flex align-items-center gap_20\">\n                 <div className=\"avatar\">\n-                  <img alt=\"avatar\" src=\"/images/avatar/avatar-1.jpg\" width={100} height={100} />\n+                  <img\n+                    alt=\"avatar\"\n+                    src=\"/images/avatar/avatar-1.jpg\"\n+                    width={100}\n+                    height={100}\n+                  />\n                 </div>\n                 <p className=\"fw-7\">\n                   <span className=\"text_secodary2-color\">Post by</span>{\" \"}\n                   <a className=\"link\">{blog.postedBy || \"Author\"}</a>\n@@ -140,9 +153,12 @@\n             <div className=\"thumbs-post\">\n               <Image\n                 className=\"lazyload\"\n                 alt={blog.title}\n-                src={blog.mainImage?.url || \"/images/feature-post/thumbs-main-post-1.webp\"}\n+                src={\n+                  blog.mainImage?.url ||\n+                  \"/images/feature-post/thumbs-main-post-1.webp\"\n+                }\n                 width={1350}\n                 height={1013}\n                 style={{ maxHeight: \"100vh\", objectFit: \"contain\" }}\n               />\n@@ -150,9 +166,9 @@\n           </div>\n         </div>\n       </div>\n \n-      {/* main grid (keeps template layout) */}\n+      {/* main grid */}\n       <div className=\"main-content\">\n         <div className=\"single-post style-1\">\n           <div className=\"tf-container\">\n             <div className=\"row\">\n@@ -165,9 +181,9 @@\n                   </ul>\n                 </div>\n               </div>\n \n-              {/* center column: article + comments */}\n+              {/* center column */}\n               <div className=\"col-lg-7\">\n                 <div className=\"content-inner\">\n                   <div className=\"wrap-post-details\">\n                     <div className=\"post-details\">\n@@ -175,13 +191,10 @@\n                         className=\"post-details__html\"\n                         dangerouslySetInnerHTML={{ __html: blog.contentHtml }}\n                       />\n                     </div>\n-                    {/* COMMENTS + FORM (from your template) */}\n-                  <Comment postId={blog._id}/>\n+                    <Comment postId={blog._id} />\n                   </div>\n-\n-                  \n                 </div>\n               </div>\n \n               {/* right sidebar */}\n@@ -191,9 +204,9 @@\n             </div>\n           </div>\n         </div>\n \n-        {/* Related Posts (dynamic by category) */}\n+        {/* Related Posts */}\n         {related.length > 0 && (\n           <div className=\"tf-container sw-layout tf-spacing-8\">\n             <div className=\"heading-section mb_28\">\n               <h3 className=\"title\">Related Posts</h3>\n@@ -218,9 +231,7 @@\n         )}\n       </div>\n \n       <Footer1 parentClass=\"tf-container\" />\n-\n-      \n     </>\n   );\n }\n"
                },
                {
                    "date": 1762775550666,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,17 +1,17 @@\n-// app/blog/[slug]/page.tsx\n+// app/(blog-single)/single-post-1/[id]/page.tsx\n+import Image from \"next/image\";\n import Link from \"next/link\";\n-import Image from \"next/image\";\n+import Script from \"next/script\";\n import { notFound } from \"next/navigation\";\n-import Script from \"next/script\";\n+import type { PageProps } from \"next\";\n \n import Header1 from \"@/components/headers/Header1\";\n import Footer1 from \"@/components/footers/Footer1\";\n import Sidebar from \"@/components/blog-single/Sidebar\";\n import SocialShare2 from \"@/components/blog-single/SocialShare2\";\n import Comment from \"@/components/blog-single/Comment\";\n import BlogCard1 from \"@/components/blog-cards/BlogCard1\";\n-import type { PageProps } from \"next\";\n \n type Blog = {\n   _id: string;\n   slug: string;\n@@ -26,55 +26,55 @@\n \n const API = process.env.NEXT_PUBLIC_API_BASE!;\n \n // ------- helpers -------\n-async function fetchBlog(slug: string): Promise<Blog | null> {\n-  const r = await fetch(`${API}/api/blogs/${slug}`, { cache: \"no-store\" });\n-  if (!r.ok) return null;\n-  return r.json();\n+async function fetchBlog(id: string): Promise<Blog | null> {\n+  const res = await fetch(`${API}/api/blogs/${id}`, { cache: \"no-store\" });\n+  if (!res.ok) return null;\n+  return res.json();\n }\n \n-async function fetchRelated(catName?: string, catSlug?: string, currentSlug?: string) {\n-  const r = await fetch(`${API}/api/blogs?limit=100`, { cache: \"no-store\" });\n-  if (!r.ok) return [];\n-  const rows: Blog[] = await r.json();\n+async function fetchRelated(catName?: string, catSlug?: string, currentId?: string) {\n+  const res = await fetch(`${API}/api/blogs?limit=100`, { cache: \"no-store\" });\n+  if (!res.ok) return [];\n+  const rows: Blog[] = await res.json();\n   return rows\n     .filter(\n       (b) =>\n-        b.slug !== currentSlug &&\n+        b._id !== currentId &&\n         (b.category?.slug === catSlug || b.category?.name === catName)\n     )\n     .slice(0, 4);\n }\n \n // ------- metadata -------\n-export async function generateMetadata({ params }: PageProps<{ slug: string }>) {\n-  const { slug } = await params; // ✅ must await in Next 15\n-  const blog = await fetchBlog(slug);\n+export async function generateMetadata({ params }: PageProps<{ id: string }>) {\n+  const { id } = await params;\n+  const blog = await fetchBlog(id);\n   if (!blog) return {};\n   return {\n     title: `${blog.title} || Drozy - Modern Blog & Magazine`,\n     description: blog.category?.name || \"Blog article\",\n     openGraph: {\n       title: blog.title,\n       description: blog.category?.name || \"Blog article\",\n       type: \"article\",\n-      url: `/blog/${blog.slug}`,\n+      url: `/blog-single/single-post-1/${blog._id}`,\n       images: blog.mainImage?.url ? [blog.mainImage.url] : undefined,\n     },\n   };\n }\n \n // ------- page -------\n-export default async function Page({ params }: PageProps<{ slug: string }>) {\n-  const { slug } = await params; // ✅ must await\n-  const blog = await fetchBlog(slug);\n+export default async function Page({ params }: PageProps<{ id: string }>) {\n+  const { id } = await params;\n+  const blog = await fetchBlog(id);\n   if (!blog) return notFound();\n \n   const related = await fetchRelated(\n     blog.category?.name,\n     blog.category?.slug,\n-    blog.slug\n+    blog._id\n   );\n \n   return (\n     <>\n@@ -82,9 +82,9 @@\n \n       {/* JSON-LD (from backend textarea) */}\n       {blog.schemaMarkup ? (\n         <Script\n-          id={`schema-${blog.slug}`}\n+          id={`schema-${blog._id}`}\n           type=\"application/ld+json\"\n           strategy=\"afterInteractive\"\n           dangerouslySetInnerHTML={{ __html: blog.schemaMarkup }}\n         />\n@@ -191,8 +191,10 @@\n                         className=\"post-details__html\"\n                         dangerouslySetInnerHTML={{ __html: blog.contentHtml }}\n                       />\n                     </div>\n+\n+                    {/* ✅ FIXED: Added required prop */}\n                     <Comment postId={blog._id} />\n                   </div>\n                 </div>\n               </div>\n@@ -221,9 +223,9 @@\n                     author: b.postedBy || \"\",\n                     category: b.category?.name || \"\",\n                     date: new Date(b.createdAt || Date.now()).toLocaleDateString(),\n                     imgSrc: b.mainImage?.url || \"\",\n-                    href: `/blog/${b.slug}`,\n+                    href: `/blog-single/single-post-1/${b._id}`,\n                   }}\n                 />\n               ))}\n             </div>\n"
                },
                {
                    "date": 1762775758662,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,10 +1,9 @@\n-// app/(blog-single)/single-post-1/[id]/page.tsx\n+// app/blog/[slug]/page.tsx\n+import Link from \"next/link\";\n import Image from \"next/image\";\n-import Link from \"next/link\";\n+import { notFound } from \"next/navigation\";\n import Script from \"next/script\";\n-import { notFound } from \"next/navigation\";\n-import type { PageProps } from \"next\";\n \n import Header1 from \"@/components/headers/Header1\";\n import Footer1 from \"@/components/footers/Footer1\";\n import Sidebar from \"@/components/blog-single/Sidebar\";\n@@ -26,79 +25,75 @@\n \n const API = process.env.NEXT_PUBLIC_API_BASE!;\n \n // ------- helpers -------\n-async function fetchBlog(id: string): Promise<Blog | null> {\n-  const res = await fetch(`${API}/api/blogs/${id}`, { cache: \"no-store\" });\n-  if (!res.ok) return null;\n-  return res.json();\n+async function fetchBlog(slug: string): Promise<Blog | null> {\n+  const r = await fetch(`${API}/api/blogs/${slug}`, { cache: \"no-store\" });\n+  if (!r.ok) return null;\n+  return r.json();\n }\n \n-async function fetchRelated(catName?: string, catSlug?: string, currentId?: string) {\n-  const res = await fetch(`${API}/api/blogs?limit=100`, { cache: \"no-store\" });\n-  if (!res.ok) return [];\n-  const rows: Blog[] = await res.json();\n+// We fetch a chunk then filter by category locally (your backend list route\n+// doesn’t support ?category yet).\n+async function fetchRelated(catName?: string, catSlug?: string, currentSlug?: string) {\n+  const r = await fetch(`${API}/api/blogs?limit=100`, { cache: \"no-store\" });\n+  if (!r.ok) return [];\n+  const rows: Blog[] = await r.json();\n   return rows\n     .filter(\n       (b) =>\n-        b._id !== currentId &&\n+        b.slug !== currentSlug &&\n         (b.category?.slug === catSlug || b.category?.name === catName)\n     )\n     .slice(0, 4);\n }\n \n-// ------- metadata -------\n-export async function generateMetadata({ params }: PageProps<{ id: string }>) {\n-  const { id } = await params;\n-  const blog = await fetchBlog(id);\n+export async function generateMetadata({ params }: { params: { slug: string } }) {\n+  const blog = await fetchBlog(params.slug);\n   if (!blog) return {};\n   return {\n     title: `${blog.title} || Drozy - Modern Blog & Magazine`,\n     description: blog.category?.name || \"Blog article\",\n     openGraph: {\n       title: blog.title,\n       description: blog.category?.name || \"Blog article\",\n       type: \"article\",\n-      url: `/blog-single/single-post-1/${blog._id}`,\n+      url: `/blog/${blog.slug}`,\n       images: blog.mainImage?.url ? [blog.mainImage.url] : undefined,\n     },\n   };\n }\n \n // ------- page -------\n-export default async function Page({ params }: PageProps<{ id: string }>) {\n-  const { id } = await params;\n-  const blog = await fetchBlog(id);\n+export default async function Page({ params }: { params: Promise<{ slug: string }> }) {\n+  const blog = await fetchBlog(params.slug);\n   if (!blog) return notFound();\n \n   const related = await fetchRelated(\n     blog.category?.name,\n     blog.category?.slug,\n-    blog._id\n+    blog.slug\n   );\n \n   return (\n     <>\n       <Header1 />\n-\n       {/* JSON-LD (from backend textarea) */}\n-      {blog.schemaMarkup ? (\n-        <Script\n-          id={`schema-${blog._id}`}\n-          type=\"application/ld+json\"\n-          strategy=\"afterInteractive\"\n-          dangerouslySetInnerHTML={{ __html: blog.schemaMarkup }}\n-        />\n-      ) : null}\n+{blog.schemaMarkup ? (\n+  <Script\n+    id={`schema-${blog.slug}`}\n+    type=\"application/ld+json\"\n+    strategy=\"afterInteractive\"\n+    dangerouslySetInnerHTML={{ __html: blog.schemaMarkup }}\n+  />\n+) : null}\n \n       {/* breadcrumb */}\n       <div className=\"bg-surface2-color\">\n         <div className=\"tf-container\">\n           <ul className=\"breadcrumb text-caption-1 text_on-surface-color\">\n             <li>\n-              <Link href=\"/\" className=\"link\">\n-                Home\n-              </Link>\n+              <Link href=\"/\" className=\"link\">Home</Link>\n             </li>\n             <li>\n               <Link href=\"/categories-1\" className=\"link\">\n                 {blog.category?.name || \"Category\"}\n@@ -115,18 +110,15 @@\n           <div className=\"post-inner\">\n             <div className=\"content\">\n               <div className=\"wrap-meta-feature d-flex align-items-center\">\n                 <span className=\"tag\">\n-                  <a className=\"text-title text_white\">\n-                    {blog.category?.name || \"CATEGORY\"}\n-                  </a>\n+                  <a className=\"text-title text_white\">{blog.category?.name || \"CATEGORY\"}</a>\n                 </span>\n                 <ul className=\"meta-feature fw-7 d-flex mb_16 text-body-1 mb-0 align-items-center\">\n                   <li>\n-                    {new Date(blog.createdAt || Date.now()).toLocaleDateString(\n-                      undefined,\n-                      { year: \"numeric\", month: \"long\", day: \"numeric\" }\n-                    )}\n+                    {new Date(blog.createdAt || Date.now()).toLocaleDateString(undefined, {\n+                      year: \"numeric\", month: \"long\", day: \"numeric\",\n+                    })}\n                   </li>\n                   <li>\n                     <span className=\"text_secodary2-color\">POST BY</span>{\" \"}\n                     <a className=\"link\">{blog.postedBy || \"Author\"}</a>\n@@ -135,14 +127,9 @@\n               </div>\n               <h1 className=\"mb_20\">{blog.title}</h1>\n               <div className=\"user-post d-flex align-items-center gap_20\">\n                 <div className=\"avatar\">\n-                  <img\n-                    alt=\"avatar\"\n-                    src=\"/images/avatar/avatar-1.jpg\"\n-                    width={100}\n-                    height={100}\n-                  />\n+                  <img alt=\"avatar\" src=\"/images/avatar/avatar-1.jpg\" width={100} height={100} />\n                 </div>\n                 <p className=\"fw-7\">\n                   <span className=\"text_secodary2-color\">Post by</span>{\" \"}\n                   <a className=\"link\">{blog.postedBy || \"Author\"}</a>\n@@ -153,12 +140,9 @@\n             <div className=\"thumbs-post\">\n               <Image\n                 className=\"lazyload\"\n                 alt={blog.title}\n-                src={\n-                  blog.mainImage?.url ||\n-                  \"/images/feature-post/thumbs-main-post-1.webp\"\n-                }\n+                src={blog.mainImage?.url || \"/images/feature-post/thumbs-main-post-1.webp\"}\n                 width={1350}\n                 height={1013}\n                 style={{ maxHeight: \"100vh\", objectFit: \"contain\" }}\n               />\n@@ -166,9 +150,9 @@\n           </div>\n         </div>\n       </div>\n \n-      {/* main grid */}\n+      {/* main grid (keeps template layout) */}\n       <div className=\"main-content\">\n         <div className=\"single-post style-1\">\n           <div className=\"tf-container\">\n             <div className=\"row\">\n@@ -181,9 +165,9 @@\n                   </ul>\n                 </div>\n               </div>\n \n-              {/* center column */}\n+              {/* center column: article + comments */}\n               <div className=\"col-lg-7\">\n                 <div className=\"content-inner\">\n                   <div className=\"wrap-post-details\">\n                     <div className=\"post-details\">\n@@ -191,12 +175,13 @@\n                         className=\"post-details__html\"\n                         dangerouslySetInnerHTML={{ __html: blog.contentHtml }}\n                       />\n                     </div>\n+                    {/* COMMENTS + FORM (from your template) */}\n+                  <Comment postId={blog._id}/>\n+                  </div>\n \n-                    {/* ✅ FIXED: Added required prop */}\n-                    <Comment postId={blog._id} />\n-                  </div>\n+                  \n                 </div>\n               </div>\n \n               {/* right sidebar */}\n@@ -206,9 +191,9 @@\n             </div>\n           </div>\n         </div>\n \n-        {/* Related Posts */}\n+        {/* Related Posts (dynamic by category) */}\n         {related.length > 0 && (\n           <div className=\"tf-container sw-layout tf-spacing-8\">\n             <div className=\"heading-section mb_28\">\n               <h3 className=\"title\">Related Posts</h3>\n@@ -223,9 +208,9 @@\n                     author: b.postedBy || \"\",\n                     category: b.category?.name || \"\",\n                     date: new Date(b.createdAt || Date.now()).toLocaleDateString(),\n                     imgSrc: b.mainImage?.url || \"\",\n-                    href: `/blog-single/single-post-1/${b._id}`,\n+                    href: `/blog/${b.slug}`,\n                   }}\n                 />\n               ))}\n             </div>\n@@ -233,7 +218,9 @@\n         )}\n       </div>\n \n       <Footer1 parentClass=\"tf-container\" />\n+\n+      \n     </>\n   );\n }\n"
                },
                {
                    "date": 1762775861018,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,10 @@\n-// app/blog/[slug]/page.tsx\n+// app/(blog-single)/single-post-1/[id]/page.tsx\n+import Image from \"next/image\";\n import Link from \"next/link\";\n-import Image from \"next/image\";\n+import Script from \"next/script\";\n import { notFound } from \"next/navigation\";\n-import Script from \"next/script\";\n+import type { PageProps } from \"next\";\n \n import Header1 from \"@/components/headers/Header1\";\n import Footer1 from \"@/components/footers/Footer1\";\n import Sidebar from \"@/components/blog-single/Sidebar\";\n@@ -25,75 +26,79 @@\n \n const API = process.env.NEXT_PUBLIC_API_BASE!;\n \n // ------- helpers -------\n-async function fetchBlog(slug: string): Promise<Blog | null> {\n-  const r = await fetch(`${API}/api/blogs/${slug}`, { cache: \"no-store\" });\n-  if (!r.ok) return null;\n-  return r.json();\n+async function fetchBlog(id: string): Promise<Blog | null> {\n+  const res = await fetch(`${API}/api/blogs/${id}`, { cache: \"no-store\" });\n+  if (!res.ok) return null;\n+  return res.json();\n }\n \n-// We fetch a chunk then filter by category locally (your backend list route\n-// doesn’t support ?category yet).\n-async function fetchRelated(catName?: string, catSlug?: string, currentSlug?: string) {\n-  const r = await fetch(`${API}/api/blogs?limit=100`, { cache: \"no-store\" });\n-  if (!r.ok) return [];\n-  const rows: Blog[] = await r.json();\n+async function fetchRelated(catName?: string, catSlug?: string, currentId?: string) {\n+  const res = await fetch(`${API}/api/blogs?limit=100`, { cache: \"no-store\" });\n+  if (!res.ok) return [];\n+  const rows: Blog[] = await res.json();\n   return rows\n     .filter(\n       (b) =>\n-        b.slug !== currentSlug &&\n+        b._id !== currentId &&\n         (b.category?.slug === catSlug || b.category?.name === catName)\n     )\n     .slice(0, 4);\n }\n \n-export async function generateMetadata({ params }: { params: { slug: string } }) {\n-  const blog = await fetchBlog(params.slug);\n+// ------- metadata -------\n+export async function generateMetadata({ params }: PageProps<{ id: string }>) {\n+  const { id } = await params;\n+  const blog = await fetchBlog(id);\n   if (!blog) return {};\n   return {\n     title: `${blog.title} || Drozy - Modern Blog & Magazine`,\n     description: blog.category?.name || \"Blog article\",\n     openGraph: {\n       title: blog.title,\n       description: blog.category?.name || \"Blog article\",\n       type: \"article\",\n-      url: `/blog/${blog.slug}`,\n+      url: `/blog-single/single-post-1/${blog._id}`,\n       images: blog.mainImage?.url ? [blog.mainImage.url] : undefined,\n     },\n   };\n }\n \n // ------- page -------\n-export default async function Page({ params }: { params: Promise<{ slug: string }> }) {\n-  const blog = await fetchBlog(params.slug);\n+export default async function Page({ params }: PageProps<{ id: string }>) {\n+  const { id } = await params;\n+  const blog = await fetchBlog(id);\n   if (!blog) return notFound();\n \n   const related = await fetchRelated(\n     blog.category?.name,\n     blog.category?.slug,\n-    blog.slug\n+    blog._id\n   );\n \n   return (\n     <>\n       <Header1 />\n+\n       {/* JSON-LD (from backend textarea) */}\n-{blog.schemaMarkup ? (\n-  <Script\n-    id={`schema-${blog.slug}`}\n-    type=\"application/ld+json\"\n-    strategy=\"afterInteractive\"\n-    dangerouslySetInnerHTML={{ __html: blog.schemaMarkup }}\n-  />\n-) : null}\n+      {blog.schemaMarkup ? (\n+        <Script\n+          id={`schema-${blog._id}`}\n+          type=\"application/ld+json\"\n+          strategy=\"afterInteractive\"\n+          dangerouslySetInnerHTML={{ __html: blog.schemaMarkup }}\n+        />\n+      ) : null}\n \n       {/* breadcrumb */}\n       <div className=\"bg-surface2-color\">\n         <div className=\"tf-container\">\n           <ul className=\"breadcrumb text-caption-1 text_on-surface-color\">\n             <li>\n-              <Link href=\"/\" className=\"link\">Home</Link>\n+              <Link href=\"/\" className=\"link\">\n+                Home\n+              </Link>\n             </li>\n             <li>\n               <Link href=\"/categories-1\" className=\"link\">\n                 {blog.category?.name || \"Category\"}\n@@ -110,15 +115,18 @@\n           <div className=\"post-inner\">\n             <div className=\"content\">\n               <div className=\"wrap-meta-feature d-flex align-items-center\">\n                 <span className=\"tag\">\n-                  <a className=\"text-title text_white\">{blog.category?.name || \"CATEGORY\"}</a>\n+                  <a className=\"text-title text_white\">\n+                    {blog.category?.name || \"CATEGORY\"}\n+                  </a>\n                 </span>\n                 <ul className=\"meta-feature fw-7 d-flex mb_16 text-body-1 mb-0 align-items-center\">\n                   <li>\n-                    {new Date(blog.createdAt || Date.now()).toLocaleDateString(undefined, {\n-                      year: \"numeric\", month: \"long\", day: \"numeric\",\n-                    })}\n+                    {new Date(blog.createdAt || Date.now()).toLocaleDateString(\n+                      undefined,\n+                      { year: \"numeric\", month: \"long\", day: \"numeric\" }\n+                    )}\n                   </li>\n                   <li>\n                     <span className=\"text_secodary2-color\">POST BY</span>{\" \"}\n                     <a className=\"link\">{blog.postedBy || \"Author\"}</a>\n@@ -127,9 +135,14 @@\n               </div>\n               <h1 className=\"mb_20\">{blog.title}</h1>\n               <div className=\"user-post d-flex align-items-center gap_20\">\n                 <div className=\"avatar\">\n-                  <img alt=\"avatar\" src=\"/images/avatar/avatar-1.jpg\" width={100} height={100} />\n+                  <img\n+                    alt=\"avatar\"\n+                    src=\"/images/avatar/avatar-1.jpg\"\n+                    width={100}\n+                    height={100}\n+                  />\n                 </div>\n                 <p className=\"fw-7\">\n                   <span className=\"text_secodary2-color\">Post by</span>{\" \"}\n                   <a className=\"link\">{blog.postedBy || \"Author\"}</a>\n@@ -140,9 +153,12 @@\n             <div className=\"thumbs-post\">\n               <Image\n                 className=\"lazyload\"\n                 alt={blog.title}\n-                src={blog.mainImage?.url || \"/images/feature-post/thumbs-main-post-1.webp\"}\n+                src={\n+                  blog.mainImage?.url ||\n+                  \"/images/feature-post/thumbs-main-post-1.webp\"\n+                }\n                 width={1350}\n                 height={1013}\n                 style={{ maxHeight: \"100vh\", objectFit: \"contain\" }}\n               />\n@@ -150,9 +166,9 @@\n           </div>\n         </div>\n       </div>\n \n-      {/* main grid (keeps template layout) */}\n+      {/* main grid */}\n       <div className=\"main-content\">\n         <div className=\"single-post style-1\">\n           <div className=\"tf-container\">\n             <div className=\"row\">\n@@ -165,9 +181,9 @@\n                   </ul>\n                 </div>\n               </div>\n \n-              {/* center column: article + comments */}\n+              {/* center column */}\n               <div className=\"col-lg-7\">\n                 <div className=\"content-inner\">\n                   <div className=\"wrap-post-details\">\n                     <div className=\"post-details\">\n@@ -175,13 +191,12 @@\n                         className=\"post-details__html\"\n                         dangerouslySetInnerHTML={{ __html: blog.contentHtml }}\n                       />\n                     </div>\n-                    {/* COMMENTS + FORM (from your template) */}\n-                  <Comment postId={blog._id}/>\n+\n+                    {/* ✅ FIXED: Added required prop */}\n+                    <Comment postId={blog._id} />\n                   </div>\n-\n-                  \n                 </div>\n               </div>\n \n               {/* right sidebar */}\n@@ -191,9 +206,9 @@\n             </div>\n           </div>\n         </div>\n \n-        {/* Related Posts (dynamic by category) */}\n+        {/* Related Posts */}\n         {related.length > 0 && (\n           <div className=\"tf-container sw-layout tf-spacing-8\">\n             <div className=\"heading-section mb_28\">\n               <h3 className=\"title\">Related Posts</h3>\n@@ -208,9 +223,9 @@\n                     author: b.postedBy || \"\",\n                     category: b.category?.name || \"\",\n                     date: new Date(b.createdAt || Date.now()).toLocaleDateString(),\n                     imgSrc: b.mainImage?.url || \"\",\n-                    href: `/blog/${b.slug}`,\n+                    href: `/blog-single/single-post-1/${b._id}`,\n                   }}\n                 />\n               ))}\n             </div>\n@@ -218,9 +233,7 @@\n         )}\n       </div>\n \n       <Footer1 parentClass=\"tf-container\" />\n-\n-      \n     </>\n   );\n }\n"
                },
                {
                    "date": 1762775893774,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,10 +1,9 @@\n-// app/(blog-single)/single-post-1/[id]/page.tsx\n+// app/blog/[slug]/page.tsx\n+import Link from \"next/link\";\n import Image from \"next/image\";\n-import Link from \"next/link\";\n+import { notFound } from \"next/navigation\";\n import Script from \"next/script\";\n-import { notFound } from \"next/navigation\";\n-import type { PageProps } from \"next\";\n \n import Header1 from \"@/components/headers/Header1\";\n import Footer1 from \"@/components/footers/Footer1\";\n import Sidebar from \"@/components/blog-single/Sidebar\";\n@@ -26,79 +25,75 @@\n \n const API = process.env.NEXT_PUBLIC_API_BASE!;\n \n // ------- helpers -------\n-async function fetchBlog(id: string): Promise<Blog | null> {\n-  const res = await fetch(`${API}/api/blogs/${id}`, { cache: \"no-store\" });\n-  if (!res.ok) return null;\n-  return res.json();\n+async function fetchBlog(slug: string): Promise<Blog | null> {\n+  const r = await fetch(`${API}/api/blogs/${slug}`, { cache: \"no-store\" });\n+  if (!r.ok) return null;\n+  return r.json();\n }\n \n-async function fetchRelated(catName?: string, catSlug?: string, currentId?: string) {\n-  const res = await fetch(`${API}/api/blogs?limit=100`, { cache: \"no-store\" });\n-  if (!res.ok) return [];\n-  const rows: Blog[] = await res.json();\n+// We fetch a chunk then filter by category locally (your backend list route\n+// doesn’t support ?category yet).\n+async function fetchRelated(catName?: string, catSlug?: string, currentSlug?: string) {\n+  const r = await fetch(`${API}/api/blogs?limit=100`, { cache: \"no-store\" });\n+  if (!r.ok) return [];\n+  const rows: Blog[] = await r.json();\n   return rows\n     .filter(\n       (b) =>\n-        b._id !== currentId &&\n+        b.slug !== currentSlug &&\n         (b.category?.slug === catSlug || b.category?.name === catName)\n     )\n     .slice(0, 4);\n }\n \n-// ------- metadata -------\n-export async function generateMetadata({ params }: PageProps<{ id: string }>) {\n-  const { id } = await params;\n-  const blog = await fetchBlog(id);\n+export async function generateMetadata({ params }: { params: { slug: string } }) {\n+  const blog = await fetchBlog(params.slug);\n   if (!blog) return {};\n   return {\n     title: `${blog.title} || Drozy - Modern Blog & Magazine`,\n     description: blog.category?.name || \"Blog article\",\n     openGraph: {\n       title: blog.title,\n       description: blog.category?.name || \"Blog article\",\n       type: \"article\",\n-      url: `/blog-single/single-post-1/${blog._id}`,\n+      url: `/blog/${blog.slug}`,\n       images: blog.mainImage?.url ? [blog.mainImage.url] : undefined,\n     },\n   };\n }\n \n // ------- page -------\n-export default async function Page({ params }: PageProps<{ id: string }>) {\n-  const { id } = await params;\n-  const blog = await fetchBlog(id);\n+export default async function Page({ params }: { params: Promise<{ slug: string }> }) {\n+  const blog = await fetchBlog(params.slug);\n   if (!blog) return notFound();\n \n   const related = await fetchRelated(\n     blog.category?.name,\n     blog.category?.slug,\n-    blog._id\n+    blog.slug\n   );\n \n   return (\n     <>\n       <Header1 />\n-\n       {/* JSON-LD (from backend textarea) */}\n-      {blog.schemaMarkup ? (\n-        <Script\n-          id={`schema-${blog._id}`}\n-          type=\"application/ld+json\"\n-          strategy=\"afterInteractive\"\n-          dangerouslySetInnerHTML={{ __html: blog.schemaMarkup }}\n-        />\n-      ) : null}\n+{blog.schemaMarkup ? (\n+  <Script\n+    id={`schema-${blog.slug}`}\n+    type=\"application/ld+json\"\n+    strategy=\"afterInteractive\"\n+    dangerouslySetInnerHTML={{ __html: blog.schemaMarkup }}\n+  />\n+) : null}\n \n       {/* breadcrumb */}\n       <div className=\"bg-surface2-color\">\n         <div className=\"tf-container\">\n           <ul className=\"breadcrumb text-caption-1 text_on-surface-color\">\n             <li>\n-              <Link href=\"/\" className=\"link\">\n-                Home\n-              </Link>\n+              <Link href=\"/\" className=\"link\">Home</Link>\n             </li>\n             <li>\n               <Link href=\"/categories-1\" className=\"link\">\n                 {blog.category?.name || \"Category\"}\n@@ -115,18 +110,15 @@\n           <div className=\"post-inner\">\n             <div className=\"content\">\n               <div className=\"wrap-meta-feature d-flex align-items-center\">\n                 <span className=\"tag\">\n-                  <a className=\"text-title text_white\">\n-                    {blog.category?.name || \"CATEGORY\"}\n-                  </a>\n+                  <a className=\"text-title text_white\">{blog.category?.name || \"CATEGORY\"}</a>\n                 </span>\n                 <ul className=\"meta-feature fw-7 d-flex mb_16 text-body-1 mb-0 align-items-center\">\n                   <li>\n-                    {new Date(blog.createdAt || Date.now()).toLocaleDateString(\n-                      undefined,\n-                      { year: \"numeric\", month: \"long\", day: \"numeric\" }\n-                    )}\n+                    {new Date(blog.createdAt || Date.now()).toLocaleDateString(undefined, {\n+                      year: \"numeric\", month: \"long\", day: \"numeric\",\n+                    })}\n                   </li>\n                   <li>\n                     <span className=\"text_secodary2-color\">POST BY</span>{\" \"}\n                     <a className=\"link\">{blog.postedBy || \"Author\"}</a>\n@@ -135,14 +127,9 @@\n               </div>\n               <h1 className=\"mb_20\">{blog.title}</h1>\n               <div className=\"user-post d-flex align-items-center gap_20\">\n                 <div className=\"avatar\">\n-                  <img\n-                    alt=\"avatar\"\n-                    src=\"/images/avatar/avatar-1.jpg\"\n-                    width={100}\n-                    height={100}\n-                  />\n+                  <img alt=\"avatar\" src=\"/images/avatar/avatar-1.jpg\" width={100} height={100} />\n                 </div>\n                 <p className=\"fw-7\">\n                   <span className=\"text_secodary2-color\">Post by</span>{\" \"}\n                   <a className=\"link\">{blog.postedBy || \"Author\"}</a>\n@@ -153,12 +140,9 @@\n             <div className=\"thumbs-post\">\n               <Image\n                 className=\"lazyload\"\n                 alt={blog.title}\n-                src={\n-                  blog.mainImage?.url ||\n-                  \"/images/feature-post/thumbs-main-post-1.webp\"\n-                }\n+                src={blog.mainImage?.url || \"/images/feature-post/thumbs-main-post-1.webp\"}\n                 width={1350}\n                 height={1013}\n                 style={{ maxHeight: \"100vh\", objectFit: \"contain\" }}\n               />\n@@ -166,9 +150,9 @@\n           </div>\n         </div>\n       </div>\n \n-      {/* main grid */}\n+      {/* main grid (keeps template layout) */}\n       <div className=\"main-content\">\n         <div className=\"single-post style-1\">\n           <div className=\"tf-container\">\n             <div className=\"row\">\n@@ -181,9 +165,9 @@\n                   </ul>\n                 </div>\n               </div>\n \n-              {/* center column */}\n+              {/* center column: article + comments */}\n               <div className=\"col-lg-7\">\n                 <div className=\"content-inner\">\n                   <div className=\"wrap-post-details\">\n                     <div className=\"post-details\">\n@@ -191,12 +175,13 @@\n                         className=\"post-details__html\"\n                         dangerouslySetInnerHTML={{ __html: blog.contentHtml }}\n                       />\n                     </div>\n+                    {/* COMMENTS + FORM (from your template) */}\n+                  <Comment postId={blog._id}/>\n+                  </div>\n \n-                    {/* ✅ FIXED: Added required prop */}\n-                    <Comment postId={blog._id} />\n-                  </div>\n+                  \n                 </div>\n               </div>\n \n               {/* right sidebar */}\n@@ -206,9 +191,9 @@\n             </div>\n           </div>\n         </div>\n \n-        {/* Related Posts */}\n+        {/* Related Posts (dynamic by category) */}\n         {related.length > 0 && (\n           <div className=\"tf-container sw-layout tf-spacing-8\">\n             <div className=\"heading-section mb_28\">\n               <h3 className=\"title\">Related Posts</h3>\n@@ -223,9 +208,9 @@\n                     author: b.postedBy || \"\",\n                     category: b.category?.name || \"\",\n                     date: new Date(b.createdAt || Date.now()).toLocaleDateString(),\n                     imgSrc: b.mainImage?.url || \"\",\n-                    href: `/blog-single/single-post-1/${b._id}`,\n+                    href: `/blog/${b.slug}`,\n                   }}\n                 />\n               ))}\n             </div>\n@@ -233,7 +218,9 @@\n         )}\n       </div>\n \n       <Footer1 parentClass=\"tf-container\" />\n+\n+      \n     </>\n   );\n }\n"
                },
                {
                    "date": 1762775947966,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,10 @@\n-// app/blog/[slug]/page.tsx\n+// app/(blog-single)/single-post-1/[id]/page.tsx\n+import Image from \"next/image\";\n import Link from \"next/link\";\n-import Image from \"next/image\";\n+import Script from \"next/script\";\n import { notFound } from \"next/navigation\";\n-import Script from \"next/script\";\n+import type { PageProps } from \"next\";\n \n import Header1 from \"@/components/headers/Header1\";\n import Footer1 from \"@/components/footers/Footer1\";\n import Sidebar from \"@/components/blog-single/Sidebar\";\n@@ -25,75 +26,79 @@\n \n const API = process.env.NEXT_PUBLIC_API_BASE!;\n \n // ------- helpers -------\n-async function fetchBlog(slug: string): Promise<Blog | null> {\n-  const r = await fetch(`${API}/api/blogs/${slug}`, { cache: \"no-store\" });\n-  if (!r.ok) return null;\n-  return r.json();\n+async function fetchBlog(id: string): Promise<Blog | null> {\n+  const res = await fetch(`${API}/api/blogs/${id}`, { cache: \"no-store\" });\n+  if (!res.ok) return null;\n+  return res.json();\n }\n \n-// We fetch a chunk then filter by category locally (your backend list route\n-// doesn’t support ?category yet).\n-async function fetchRelated(catName?: string, catSlug?: string, currentSlug?: string) {\n-  const r = await fetch(`${API}/api/blogs?limit=100`, { cache: \"no-store\" });\n-  if (!r.ok) return [];\n-  const rows: Blog[] = await r.json();\n+async function fetchRelated(catName?: string, catSlug?: string, currentId?: string) {\n+  const res = await fetch(`${API}/api/blogs?limit=100`, { cache: \"no-store\" });\n+  if (!res.ok) return [];\n+  const rows: Blog[] = await res.json();\n   return rows\n     .filter(\n       (b) =>\n-        b.slug !== currentSlug &&\n+        b._id !== currentId &&\n         (b.category?.slug === catSlug || b.category?.name === catName)\n     )\n     .slice(0, 4);\n }\n \n-export async function generateMetadata({ params }: { params: { slug: string } }) {\n-  const blog = await fetchBlog(params.slug);\n+// ------- metadata -------\n+export async function generateMetadata({ params }: PageProps<{ id: string }>) {\n+  const { id } = await params;\n+  const blog = await fetchBlog(id);\n   if (!blog) return {};\n   return {\n     title: `${blog.title} || Drozy - Modern Blog & Magazine`,\n     description: blog.category?.name || \"Blog article\",\n     openGraph: {\n       title: blog.title,\n       description: blog.category?.name || \"Blog article\",\n       type: \"article\",\n-      url: `/blog/${blog.slug}`,\n+      url: `/blog-single/single-post-1/${blog._id}`,\n       images: blog.mainImage?.url ? [blog.mainImage.url] : undefined,\n     },\n   };\n }\n \n // ------- page -------\n-export default async function Page({ params }: { params: Promise<{ slug: string }> }) {\n-  const blog = await fetchBlog(params.slug);\n+export default async function Page({ params }: PageProps<{ id: string }>) {\n+  const { id } = await params;\n+  const blog = await fetchBlog(id);\n   if (!blog) return notFound();\n \n   const related = await fetchRelated(\n     blog.category?.name,\n     blog.category?.slug,\n-    blog.slug\n+    blog._id\n   );\n \n   return (\n     <>\n       <Header1 />\n+\n       {/* JSON-LD (from backend textarea) */}\n-{blog.schemaMarkup ? (\n-  <Script\n-    id={`schema-${blog.slug}`}\n-    type=\"application/ld+json\"\n-    strategy=\"afterInteractive\"\n-    dangerouslySetInnerHTML={{ __html: blog.schemaMarkup }}\n-  />\n-) : null}\n+      {blog.schemaMarkup ? (\n+        <Script\n+          id={`schema-${blog._id}`}\n+          type=\"application/ld+json\"\n+          strategy=\"afterInteractive\"\n+          dangerouslySetInnerHTML={{ __html: blog.schemaMarkup }}\n+        />\n+      ) : null}\n \n       {/* breadcrumb */}\n       <div className=\"bg-surface2-color\">\n         <div className=\"tf-container\">\n           <ul className=\"breadcrumb text-caption-1 text_on-surface-color\">\n             <li>\n-              <Link href=\"/\" className=\"link\">Home</Link>\n+              <Link href=\"/\" className=\"link\">\n+                Home\n+              </Link>\n             </li>\n             <li>\n               <Link href=\"/categories-1\" className=\"link\">\n                 {blog.category?.name || \"Category\"}\n@@ -110,15 +115,18 @@\n           <div className=\"post-inner\">\n             <div className=\"content\">\n               <div className=\"wrap-meta-feature d-flex align-items-center\">\n                 <span className=\"tag\">\n-                  <a className=\"text-title text_white\">{blog.category?.name || \"CATEGORY\"}</a>\n+                  <a className=\"text-title text_white\">\n+                    {blog.category?.name || \"CATEGORY\"}\n+                  </a>\n                 </span>\n                 <ul className=\"meta-feature fw-7 d-flex mb_16 text-body-1 mb-0 align-items-center\">\n                   <li>\n-                    {new Date(blog.createdAt || Date.now()).toLocaleDateString(undefined, {\n-                      year: \"numeric\", month: \"long\", day: \"numeric\",\n-                    })}\n+                    {new Date(blog.createdAt || Date.now()).toLocaleDateString(\n+                      undefined,\n+                      { year: \"numeric\", month: \"long\", day: \"numeric\" }\n+                    )}\n                   </li>\n                   <li>\n                     <span className=\"text_secodary2-color\">POST BY</span>{\" \"}\n                     <a className=\"link\">{blog.postedBy || \"Author\"}</a>\n@@ -127,9 +135,14 @@\n               </div>\n               <h1 className=\"mb_20\">{blog.title}</h1>\n               <div className=\"user-post d-flex align-items-center gap_20\">\n                 <div className=\"avatar\">\n-                  <img alt=\"avatar\" src=\"/images/avatar/avatar-1.jpg\" width={100} height={100} />\n+                  <img\n+                    alt=\"avatar\"\n+                    src=\"/images/avatar/avatar-1.jpg\"\n+                    width={100}\n+                    height={100}\n+                  />\n                 </div>\n                 <p className=\"fw-7\">\n                   <span className=\"text_secodary2-color\">Post by</span>{\" \"}\n                   <a className=\"link\">{blog.postedBy || \"Author\"}</a>\n@@ -140,9 +153,12 @@\n             <div className=\"thumbs-post\">\n               <Image\n                 className=\"lazyload\"\n                 alt={blog.title}\n-                src={blog.mainImage?.url || \"/images/feature-post/thumbs-main-post-1.webp\"}\n+                src={\n+                  blog.mainImage?.url ||\n+                  \"/images/feature-post/thumbs-main-post-1.webp\"\n+                }\n                 width={1350}\n                 height={1013}\n                 style={{ maxHeight: \"100vh\", objectFit: \"contain\" }}\n               />\n@@ -150,9 +166,9 @@\n           </div>\n         </div>\n       </div>\n \n-      {/* main grid (keeps template layout) */}\n+      {/* main grid */}\n       <div className=\"main-content\">\n         <div className=\"single-post style-1\">\n           <div className=\"tf-container\">\n             <div className=\"row\">\n@@ -165,9 +181,9 @@\n                   </ul>\n                 </div>\n               </div>\n \n-              {/* center column: article + comments */}\n+              {/* center column */}\n               <div className=\"col-lg-7\">\n                 <div className=\"content-inner\">\n                   <div className=\"wrap-post-details\">\n                     <div className=\"post-details\">\n@@ -175,13 +191,12 @@\n                         className=\"post-details__html\"\n                         dangerouslySetInnerHTML={{ __html: blog.contentHtml }}\n                       />\n                     </div>\n-                    {/* COMMENTS + FORM (from your template) */}\n-                  <Comment postId={blog._id}/>\n+\n+                    {/* ✅ FIXED: Added required prop */}\n+                    <Comment postId={blog._id} />\n                   </div>\n-\n-                  \n                 </div>\n               </div>\n \n               {/* right sidebar */}\n@@ -191,9 +206,9 @@\n             </div>\n           </div>\n         </div>\n \n-        {/* Related Posts (dynamic by category) */}\n+        {/* Related Posts */}\n         {related.length > 0 && (\n           <div className=\"tf-container sw-layout tf-spacing-8\">\n             <div className=\"heading-section mb_28\">\n               <h3 className=\"title\">Related Posts</h3>\n@@ -208,9 +223,9 @@\n                     author: b.postedBy || \"\",\n                     category: b.category?.name || \"\",\n                     date: new Date(b.createdAt || Date.now()).toLocaleDateString(),\n                     imgSrc: b.mainImage?.url || \"\",\n-                    href: `/blog/${b.slug}`,\n+                    href: `/blog-single/single-post-1/${b._id}`,\n                   }}\n                 />\n               ))}\n             </div>\n@@ -218,9 +233,7 @@\n         )}\n       </div>\n \n       <Footer1 parentClass=\"tf-container\" />\n-\n-      \n     </>\n   );\n }\n"
                },
                {
                    "date": 1762778542435,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,10 +1,9 @@\n-// app/(blog-single)/single-post-1/[id]/page.tsx\n+// app/blog/[slug]/page.tsx\n+import Link from \"next/link\";\n import Image from \"next/image\";\n-import Link from \"next/link\";\n import Script from \"next/script\";\n-import { notFound } from \"next/navigation\";\n-import type { PageProps } from \"next\";\n+// import { notFound } from \"next/navigation\"; // use after debugging\n \n import Header1 from \"@/components/headers/Header1\";\n import Footer1 from \"@/components/footers/Footer1\";\n import Sidebar from \"@/components/blog-single/Sidebar\";\n@@ -24,67 +23,129 @@\n   schemaMarkup?: string;\n };\n \n const API = process.env.NEXT_PUBLIC_API_BASE!;\n+function apiBase() {\n+  if (!API || !/^https?:\\/\\//.test(API)) {\n+    console.error(\"NEXT_PUBLIC_API_BASE is missing/invalid:\", API);\n+  }\n+  return API?.replace(/\\/+$/, \"\");\n+}\n \n-// ------- helpers -------\n-async function fetchBlog(id: string): Promise<Blog | null> {\n-  const res = await fetch(`${API}/api/blogs/${id}`, { cache: \"no-store\" });\n-  if (!res.ok) return null;\n-  return res.json();\n+// ---------- robust fetchers ----------\n+async function fetchBlog(slug: string): Promise<Blog | null> {\n+  const base = apiBase();\n+  const safe = encodeURIComponent(slug);\n+\n+  // 1) Try /api/blogs/:slug\n+  try {\n+    const r1 = await fetch(`${base}/api/blogs/${safe}`, { cache: \"no-store\" });\n+    if (r1.ok) return await r1.json();\n+    if (r1.status !== 404) {\n+      console.warn(\"blogs/:slug returned\", r1.status);\n+    }\n+  } catch (e) {\n+    console.warn(\"blogs/:slug failed\", e);\n+  }\n+\n+  // 2) Try /api/blogs?slug=…\n+  try {\n+    const r2 = await fetch(`${base}/api/blogs?slug=${safe}`, { cache: \"no-store\" });\n+    if (r2.ok) {\n+      const data = await r2.json();\n+      if (Array.isArray(data) && data.length) return data[0] as Blog;\n+      if (data && data.slug) return data as Blog;\n+    }\n+  } catch (e) {\n+    console.warn(\"blogs?slug= failed\", e);\n+  }\n+\n+  // 3) Fallback: list & filter\n+  try {\n+    const r3 = await fetch(`${base}/api/blogs?limit=100`, { cache: \"no-store\" });\n+    if (r3.ok) {\n+      const rows = (await r3.json()) as Blog[];\n+      const hit = rows.find((b) => b.slug === slug);\n+      if (hit) return hit;\n+    }\n+  } catch (e) {\n+    console.warn(\"blogs list fallback failed\", e);\n+  }\n+\n+  console.warn(\"No blog found for slug:\", slug);\n+  return null;\n }\n \n-async function fetchRelated(catName?: string, catSlug?: string, currentId?: string) {\n-  const res = await fetch(`${API}/api/blogs?limit=100`, { cache: \"no-store\" });\n-  if (!res.ok) return [];\n-  const rows: Blog[] = await res.json();\n-  return rows\n-    .filter(\n-      (b) =>\n-        b._id !== currentId &&\n-        (b.category?.slug === catSlug || b.category?.name === catName)\n-    )\n-    .slice(0, 4);\n+async function fetchRelated(catName?: string, catSlug?: string, currentSlug?: string) {\n+  const base = apiBase();\n+  try {\n+    const r = await fetch(`${base}/api/blogs?limit=100`, { cache: \"no-store\" });\n+    if (!r.ok) return [];\n+    const rows: Blog[] = await r.json();\n+    return rows\n+      .filter(\n+        (b) =>\n+          b.slug !== currentSlug &&\n+          (b.category?.slug === catSlug || b.category?.name === catName)\n+      )\n+      .slice(0, 4);\n+  } catch {\n+    return [];\n+  }\n }\n \n-// ------- metadata -------\n-export async function generateMetadata({ params }: PageProps<{ id: string }>) {\n-  const { id } = await params;\n-  const blog = await fetchBlog(id);\n-  if (!blog) return {};\n+// ---------- metadata ----------\n+export async function generateMetadata({ params }: { params: { slug: string } }) {\n+  const blog = await fetchBlog(params.slug);\n+  if (!blog) return { title: \"Article not found\" };\n   return {\n-    title: `${blog.title} || Drozy - Modern Blog & Magazine`,\n+    title: blog.title,\n     description: blog.category?.name || \"Blog article\",\n     openGraph: {\n       title: blog.title,\n       description: blog.category?.name || \"Blog article\",\n       type: \"article\",\n-      url: `/blog-single/single-post-1/${blog._id}`,\n+      url: `/blog/${blog.slug}`,\n       images: blog.mainImage?.url ? [blog.mainImage.url] : undefined,\n     },\n   };\n }\n \n-// ------- page -------\n-export default async function Page({ params }: PageProps<{ id: string }>) {\n-  const { id } = await params;\n-  const blog = await fetchBlog(id);\n-  if (!blog) return notFound();\n+// ---------- page ----------\n+export default async function Page({ params }: { params: { slug: string } }) {\n+  const blog = await fetchBlog(params.slug);\n \n+  // For now, show a friendly message instead of 404 so you can see logs.\n+  if (!blog) {\n+    return (\n+      <>\n+        <Header1 />\n+        <div className=\"tf-container\" style={{ padding: \"64px 0\" }}>\n+          <h1>Article not found</h1>\n+          <p>\n+            Slug: <code>{params.slug}</code>\n+          </p>\n+          <p>Check <code>NEXT_PUBLIC_API_BASE</code> and that this slug exists in your backend.</p>\n+        </div>\n+        <Footer1 parentClass=\"tf-container\" />\n+      </>\n+    );\n+    // When ready, switch to: notFound();\n+  }\n+\n   const related = await fetchRelated(\n     blog.category?.name,\n     blog.category?.slug,\n-    blog._id\n+    blog.slug\n   );\n \n   return (\n     <>\n       <Header1 />\n \n-      {/* JSON-LD (from backend textarea) */}\n       {blog.schemaMarkup ? (\n         <Script\n-          id={`schema-${blog._id}`}\n+          id={`schema-${blog.slug}`}\n           type=\"application/ld+json\"\n           strategy=\"afterInteractive\"\n           dangerouslySetInnerHTML={{ __html: blog.schemaMarkup }}\n         />\n@@ -93,14 +154,10 @@\n       {/* breadcrumb */}\n       <div className=\"bg-surface2-color\">\n         <div className=\"tf-container\">\n           <ul className=\"breadcrumb text-caption-1 text_on-surface-color\">\n+            <li><Link href=\"/\" className=\"link\">Home</Link></li>\n             <li>\n-              <Link href=\"/\" className=\"link\">\n-                Home\n-              </Link>\n-            </li>\n-            <li>\n               <Link href=\"/categories-1\" className=\"link\">\n                 {blog.category?.name || \"Category\"}\n               </Link>\n             </li>\n@@ -115,18 +172,15 @@\n           <div className=\"post-inner\">\n             <div className=\"content\">\n               <div className=\"wrap-meta-feature d-flex align-items-center\">\n                 <span className=\"tag\">\n-                  <a className=\"text-title text_white\">\n-                    {blog.category?.name || \"CATEGORY\"}\n-                  </a>\n+                  <a className=\"text-title text_white\">{blog.category?.name || \"CATEGORY\"}</a>\n                 </span>\n                 <ul className=\"meta-feature fw-7 d-flex mb_16 text-body-1 mb-0 align-items-center\">\n                   <li>\n-                    {new Date(blog.createdAt || Date.now()).toLocaleDateString(\n-                      undefined,\n-                      { year: \"numeric\", month: \"long\", day: \"numeric\" }\n-                    )}\n+                    {new Date(blog.createdAt || Date.now()).toLocaleDateString(undefined, {\n+                      year: \"numeric\", month: \"long\", day: \"numeric\",\n+                    })}\n                   </li>\n                   <li>\n                     <span className=\"text_secodary2-color\">POST BY</span>{\" \"}\n                     <a className=\"link\">{blog.postedBy || \"Author\"}</a>\n@@ -135,14 +189,9 @@\n               </div>\n               <h1 className=\"mb_20\">{blog.title}</h1>\n               <div className=\"user-post d-flex align-items-center gap_20\">\n                 <div className=\"avatar\">\n-                  <img\n-                    alt=\"avatar\"\n-                    src=\"/images/avatar/avatar-1.jpg\"\n-                    width={100}\n-                    height={100}\n-                  />\n+                  <img alt=\"avatar\" src=\"/images/avatar/avatar-1.jpg\" width={100} height={100} />\n                 </div>\n                 <p className=\"fw-7\">\n                   <span className=\"text_secodary2-color\">Post by</span>{\" \"}\n                   <a className=\"link\">{blog.postedBy || \"Author\"}</a>\n@@ -153,12 +202,9 @@\n             <div className=\"thumbs-post\">\n               <Image\n                 className=\"lazyload\"\n                 alt={blog.title}\n-                src={\n-                  blog.mainImage?.url ||\n-                  \"/images/feature-post/thumbs-main-post-1.webp\"\n-                }\n+                src={blog.mainImage?.url || \"/images/feature-post/thumbs-main-post-1.webp\"}\n                 width={1350}\n                 height={1013}\n                 style={{ maxHeight: \"100vh\", objectFit: \"contain\" }}\n               />\n@@ -171,9 +217,8 @@\n       <div className=\"main-content\">\n         <div className=\"single-post style-1\">\n           <div className=\"tf-container\">\n             <div className=\"row\">\n-              {/* left share */}\n               <div className=\"col-lg-2 lg-hide\">\n                 <div className=\"share-bar style-1 text-center sticky-top\">\n                   <h5 className=\"mb_20\">Share This Post</h5>\n                   <ul className=\"d-grid gap_10\">\n@@ -181,9 +226,8 @@\n                   </ul>\n                 </div>\n               </div>\n \n-              {/* center column */}\n               <div className=\"col-lg-7\">\n                 <div className=\"content-inner\">\n                   <div className=\"wrap-post-details\">\n                     <div className=\"post-details\">\n@@ -192,23 +236,21 @@\n                         dangerouslySetInnerHTML={{ __html: blog.contentHtml }}\n                       />\n                     </div>\n \n-                    {/* ✅ FIXED: Added required prop */}\n+                    {/* Comments */}\n                     <Comment postId={blog._id} />\n                   </div>\n                 </div>\n               </div>\n \n-              {/* right sidebar */}\n               <div className=\"col-lg-3\">\n                 <Sidebar />\n               </div>\n             </div>\n           </div>\n         </div>\n \n-        {/* Related Posts */}\n         {related.length > 0 && (\n           <div className=\"tf-container sw-layout tf-spacing-8\">\n             <div className=\"heading-section mb_28\">\n               <h3 className=\"title\">Related Posts</h3>\n@@ -223,9 +265,9 @@\n                     author: b.postedBy || \"\",\n                     category: b.category?.name || \"\",\n                     date: new Date(b.createdAt || Date.now()).toLocaleDateString(),\n                     imgSrc: b.mainImage?.url || \"\",\n-                    href: `/blog-single/single-post-1/${b._id}`,\n+                    href: `/blog/${b.slug}`,\n                   }}\n                 />\n               ))}\n             </div>\n"
                },
                {
                    "date": 1762786028505,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n // app/blog/[slug]/page.tsx\n import Link from \"next/link\";\n import Image from \"next/image\";\n import Script from \"next/script\";\n-// import { notFound } from \"next/navigation\"; // use after debugging\n+import { notFound } from \"next/navigation\";\n \n import Header1 from \"@/components/headers/Header1\";\n import Footer1 from \"@/components/footers/Footer1\";\n import Sidebar from \"@/components/blog-single/Sidebar\";\n@@ -22,64 +22,31 @@\n   createdAt?: string;\n   schemaMarkup?: string;\n };\n \n-const API = process.env.NEXT_PUBLIC_API_BASE!;\n-function apiBase() {\n-  if (!API || !/^https?:\\/\\//.test(API)) {\n-    console.error(\"NEXT_PUBLIC_API_BASE is missing/invalid:\", API);\n-  }\n-  return API?.replace(/\\/+$/, \"\");\n-}\n+const API = process.env.NEXT_PUBLIC_API_BASE || \"\";\n \n-// ---------- robust fetchers ----------\n+// ===== Helpers =====\n async function fetchBlog(slug: string): Promise<Blog | null> {\n-  const base = apiBase();\n-  const safe = encodeURIComponent(slug);\n-\n-  // 1) Try /api/blogs/:slug\n   try {\n-    const r1 = await fetch(`${base}/api/blogs/${safe}`, { cache: \"no-store\" });\n-    if (r1.ok) return await r1.json();\n-    if (r1.status !== 404) {\n-      console.warn(\"blogs/:slug returned\", r1.status);\n-    }\n+    const r = await fetch(`${API}/api/blogs/${encodeURIComponent(slug)}`, {\n+      cache: \"no-store\",\n+    });\n+    if (!r.ok) return null;\n+    return r.json();\n   } catch (e) {\n-    console.warn(\"blogs/:slug failed\", e);\n+    console.error(\"Fetch blog error:\", e);\n+    return null;\n   }\n-\n-  // 2) Try /api/blogs?slug=…\n-  try {\n-    const r2 = await fetch(`${base}/api/blogs?slug=${safe}`, { cache: \"no-store\" });\n-    if (r2.ok) {\n-      const data = await r2.json();\n-      if (Array.isArray(data) && data.length) return data[0] as Blog;\n-      if (data && data.slug) return data as Blog;\n-    }\n-  } catch (e) {\n-    console.warn(\"blogs?slug= failed\", e);\n-  }\n-\n-  // 3) Fallback: list & filter\n-  try {\n-    const r3 = await fetch(`${base}/api/blogs?limit=100`, { cache: \"no-store\" });\n-    if (r3.ok) {\n-      const rows = (await r3.json()) as Blog[];\n-      const hit = rows.find((b) => b.slug === slug);\n-      if (hit) return hit;\n-    }\n-  } catch (e) {\n-    console.warn(\"blogs list fallback failed\", e);\n-  }\n-\n-  console.warn(\"No blog found for slug:\", slug);\n-  return null;\n }\n \n-async function fetchRelated(catName?: string, catSlug?: string, currentSlug?: string) {\n-  const base = apiBase();\n+async function fetchRelated(\n+  catName?: string,\n+  catSlug?: string,\n+  currentSlug?: string\n+): Promise<Blog[]> {\n   try {\n-    const r = await fetch(`${base}/api/blogs?limit=100`, { cache: \"no-store\" });\n+    const r = await fetch(`${API}/api/blogs?limit=100`, { cache: \"no-store\" });\n     if (!r.ok) return [];\n     const rows: Blog[] = await r.json();\n     return rows\n       .filter(\n@@ -92,14 +59,21 @@\n     return [];\n   }\n }\n \n-// ---------- metadata ----------\n-export async function generateMetadata({ params }: { params: { slug: string } }) {\n+// ===== Metadata =====\n+export async function generateMetadata({\n+  params,\n+}: {\n+  params: { slug: string };\n+}) {\n   const blog = await fetchBlog(params.slug);\n-  if (!blog) return { title: \"Article not found\" };\n+  if (!blog)\n+    return {\n+      title: \"Post not found\",\n+    };\n   return {\n-    title: blog.title,\n+    title: `${blog.title} || Drozy - Modern Blog & Magazine`,\n     description: blog.category?.name || \"Blog article\",\n     openGraph: {\n       title: blog.title,\n       description: blog.category?.name || \"Blog article\",\n@@ -109,30 +83,17 @@\n     },\n   };\n }\n \n-// ---------- page ----------\n-export default async function Page({ params }: { params: { slug: string } }) {\n+// ===== Page Component =====\n+export default async function Page({\n+  params,\n+}: {\n+  params: { slug: string };\n+}) {\n   const blog = await fetchBlog(params.slug);\n+  if (!blog) return notFound();\n \n-  // For now, show a friendly message instead of 404 so you can see logs.\n-  if (!blog) {\n-    return (\n-      <>\n-        <Header1 />\n-        <div className=\"tf-container\" style={{ padding: \"64px 0\" }}>\n-          <h1>Article not found</h1>\n-          <p>\n-            Slug: <code>{params.slug}</code>\n-          </p>\n-          <p>Check <code>NEXT_PUBLIC_API_BASE</code> and that this slug exists in your backend.</p>\n-        </div>\n-        <Footer1 parentClass=\"tf-container\" />\n-      </>\n-    );\n-    // When ready, switch to: notFound();\n-  }\n-\n   const related = await fetchRelated(\n     blog.category?.name,\n     blog.category?.slug,\n     blog.slug\n@@ -141,8 +102,9 @@\n   return (\n     <>\n       <Header1 />\n \n+      {/* Schema Markup (JSON-LD) */}\n       {blog.schemaMarkup ? (\n         <Script\n           id={`schema-${blog.slug}`}\n           type=\"application/ld+json\"\n@@ -150,14 +112,18 @@\n           dangerouslySetInnerHTML={{ __html: blog.schemaMarkup }}\n         />\n       ) : null}\n \n-      {/* breadcrumb */}\n+      {/* Breadcrumb */}\n       <div className=\"bg-surface2-color\">\n         <div className=\"tf-container\">\n           <ul className=\"breadcrumb text-caption-1 text_on-surface-color\">\n-            <li><Link href=\"/\" className=\"link\">Home</Link></li>\n             <li>\n+              <Link href=\"/\" className=\"link\">\n+                Home\n+              </Link>\n+            </li>\n+            <li>\n               <Link href=\"/categories-1\" className=\"link\">\n                 {blog.category?.name || \"Category\"}\n               </Link>\n             </li>\n@@ -165,22 +131,29 @@\n           </ul>\n         </div>\n       </div>\n \n-      {/* hero */}\n+      {/* Hero Section */}\n       <div className=\"heading-post style-1\">\n         <div className=\"tf-container\">\n           <div className=\"post-inner\">\n             <div className=\"content\">\n               <div className=\"wrap-meta-feature d-flex align-items-center\">\n                 <span className=\"tag\">\n-                  <a className=\"text-title text_white\">{blog.category?.name || \"CATEGORY\"}</a>\n+                  <a className=\"text-title text_white\">\n+                    {blog.category?.name || \"CATEGORY\"}\n+                  </a>\n                 </span>\n                 <ul className=\"meta-feature fw-7 d-flex mb_16 text-body-1 mb-0 align-items-center\">\n                   <li>\n-                    {new Date(blog.createdAt || Date.now()).toLocaleDateString(undefined, {\n-                      year: \"numeric\", month: \"long\", day: \"numeric\",\n-                    })}\n+                    {new Date(blog.createdAt || Date.now()).toLocaleDateString(\n+                      undefined,\n+                      {\n+                        year: \"numeric\",\n+                        month: \"long\",\n+                        day: \"numeric\",\n+                      }\n+                    )}\n                   </li>\n                   <li>\n                     <span className=\"text_secodary2-color\">POST BY</span>{\" \"}\n                     <a className=\"link\">{blog.postedBy || \"Author\"}</a>\n@@ -189,9 +162,14 @@\n               </div>\n               <h1 className=\"mb_20\">{blog.title}</h1>\n               <div className=\"user-post d-flex align-items-center gap_20\">\n                 <div className=\"avatar\">\n-                  <img alt=\"avatar\" src=\"/images/avatar/avatar-1.jpg\" width={100} height={100} />\n+                  <img\n+                    alt=\"avatar\"\n+                    src=\"/images/avatar/avatar-1.jpg\"\n+                    width={100}\n+                    height={100}\n+                  />\n                 </div>\n                 <p className=\"fw-7\">\n                   <span className=\"text_secodary2-color\">Post by</span>{\" \"}\n                   <a className=\"link\">{blog.postedBy || \"Author\"}</a>\n@@ -202,9 +180,12 @@\n             <div className=\"thumbs-post\">\n               <Image\n                 className=\"lazyload\"\n                 alt={blog.title}\n-                src={blog.mainImage?.url || \"/images/feature-post/thumbs-main-post-1.webp\"}\n+                src={\n+                  blog.mainImage?.url ||\n+                  \"/images/feature-post/thumbs-main-post-1.webp\"\n+                }\n                 width={1350}\n                 height={1013}\n                 style={{ maxHeight: \"100vh\", objectFit: \"contain\" }}\n               />\n@@ -212,13 +193,14 @@\n           </div>\n         </div>\n       </div>\n \n-      {/* main grid */}\n+      {/* Main Content */}\n       <div className=\"main-content\">\n         <div className=\"single-post style-1\">\n           <div className=\"tf-container\">\n             <div className=\"row\">\n+              {/* Left Share */}\n               <div className=\"col-lg-2 lg-hide\">\n                 <div className=\"share-bar style-1 text-center sticky-top\">\n                   <h5 className=\"mb_20\">Share This Post</h5>\n                   <ul className=\"d-grid gap_10\">\n@@ -226,15 +208,18 @@\n                   </ul>\n                 </div>\n               </div>\n \n+              {/* Center Content */}\n               <div className=\"col-lg-7\">\n                 <div className=\"content-inner\">\n                   <div className=\"wrap-post-details\">\n                     <div className=\"post-details\">\n                       <div\n                         className=\"post-details__html\"\n-                        dangerouslySetInnerHTML={{ __html: blog.contentHtml }}\n+                        dangerouslySetInnerHTML={{\n+                          __html: blog.contentHtml,\n+                        }}\n                       />\n                     </div>\n \n                     {/* Comments */}\n@@ -242,15 +227,17 @@\n                   </div>\n                 </div>\n               </div>\n \n+              {/* Right Sidebar */}\n               <div className=\"col-lg-3\">\n                 <Sidebar />\n               </div>\n             </div>\n           </div>\n         </div>\n \n+        {/* Related Posts */}\n         {related.length > 0 && (\n           <div className=\"tf-container sw-layout tf-spacing-8\">\n             <div className=\"heading-section mb_28\">\n               <h3 className=\"title\">Related Posts</h3>\n"
                }
            ],
            "date": 1762454339262,
            "name": "Commit-0",
            "content": "// app/blog/[slug]/page.tsx\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport { notFound } from \"next/navigation\";\n\nimport Header1 from \"@/components/headers/Header1\";\nimport Footer1 from \"@/components/footers/Footer1\";\nimport Sidebar from \"@/components/blog-single/Sidebar\";\nimport SocialShare2 from \"@/components/blog-single/SocialShare2\";\nimport Comment from \"@/components/blog-single/Comment\";\nimport BlogCard1 from \"@/components/blog-cards/BlogCard1\";\n\ntype Blog = {\n  _id: string;\n  slug: string;\n  title: string;\n  postedBy?: string;\n  mainImage?: { url?: string };\n  category?: { name?: string; slug?: string; _id?: string };\n  contentHtml?: string;\n  createdAt?: string;\n  metaTitle?: string;\n  metaDescription?: string;\n};\n\nconst API = process.env.NEXT_PUBLIC_API_BASE!;\n\n// ---- helpers ----\nasync function fetchJSON<T>(url: string, revalidate = 120): Promise<T> {\n  const res = await fetch(url, { next: { revalidate } });\n  if (res.status === 404) throw new Error(\"404\");\n  if (!res.ok) throw new Error(await res.text());\n  return res.json();\n}\n\nfunction toCardPost(b: Blog) {\n  const imageUrl = b.mainImage?.url || \"\";\n  return {\n    id: b._id,                 // widget may read id but we link with slug\n    slug: b.slug,\n    href: `/blog/${b.slug}`,\n    title: b.title,\n    author: b.postedBy || \"\",\n    date: new Date(b.createdAt || \"\").toDateString(),\n    category: b.category?.name || \"\",\n    imgSrc: imageUrl,\n    image: imageUrl,\n    img: imageUrl,\n    thumb: imageUrl,\n  };\n}\n\n// ---- SEO ----\nexport async function generateMetadata({ params }: { params: { slug: string } }) {\n  try {\n    const blog = await fetchJSON<Blog>(`${API}/api/blogs/${params.slug}`, 60);\n    return {\n      title: blog.metaTitle || blog.title,\n      description: blog.metaDescription || blog.title,\n      openGraph: {\n        title: blog.metaTitle || blog.title,\n        description: blog.metaDescription || blog.title,\n        type: \"article\",\n        url: `/blog/${blog.slug}`,\n        images: blog.mainImage?.url ? [{ url: blog.mainImage.url }] : undefined,\n      },\n    };\n  } catch {\n    return { title: \"Not found\" };\n  }\n}\n\n// ---- page ----\nexport default async function Page({ params }: { params: { slug: string } }) {\n  // 1) current post\n  let blog: Blog | null = null;\n  try {\n    blog = await fetchJSON<Blog>(`${API}/api/blogs/${params.slug}`, 60);\n  } catch {\n    return notFound();\n  }\n  if (!blog) return notFound();\n\n  // 2) load some recent posts to compute prev/next + related\n  const all = await fetchJSON<Blog[]>(`${API}/api/blogs?limit=50`, 60);\n\n  // sort newest -> oldest\n  const sorted = [...all].sort(\n    (a, b) => new Date(b.createdAt || 0).getTime() - new Date(a.createdAt || 0).getTime()\n  );\n  const idx = sorted.findIndex((p) => p.slug === blog!.slug);\n  const prevBlog = idx > 0 ? sorted[idx - 1] : null;\n  const nextBlog = idx >= 0 && idx < sorted.length - 1 ? sorted[idx + 1] : null;\n\n  // 3) related by category (exclude current)\n  const related = sorted\n    .filter(\n      (p) =>\n        p.slug !== blog!.slug &&\n        (p.category?._id && blog!.category?._id\n          ? p.category!._id === blog!.category!._id\n          : p.category?.name === blog!.category?.name)\n    )\n    .slice(0, 6);\n\n  return (\n    <>\n      <Header1 />\n\n      {/* breadcrumb */}\n      <div className=\"bg-surface2-color\">\n        <div className=\"tf-container\">\n          <ul className=\"breadcrumb text-caption-1 text_on-surface-color\">\n            <li>\n              <Link href=\"/\" className=\"link\">Home</Link>\n            </li>\n            <li>\n              {/* If you build a real category page later, swap the href */}\n              <Link href={`/categories-1`} className=\"link\">\n                {blog.category?.name || \"Category\"}\n              </Link>\n            </li>\n            <li>{blog.title}</li>\n          </ul>\n        </div>\n      </div>\n\n      {/* heading-post */}\n      <div className=\"heading-post style-1\">\n        <div className=\"tf-container\">\n          <div className=\"post-inner\">\n            <div className=\"content\">\n              <div className=\"wrap-meta-feature d-flex align-items-center\">\n                <span className=\"tag\">\n                  <a className=\"text-title text_white\">\n                    {blog.category?.name || \"General\"}\n                  </a>\n                </span>\n                <ul className=\"meta-feature fw-7 d-flex mb_16 text-body-1 mb-0 align-items-center\">\n                  <li>{new Date(blog.createdAt || \"\").toDateString()}</li>\n                  <li>\n                    <span className=\"text_secodary2-color\">POST BY</span>{\" \"}\n                    <a className=\"link\">{blog.postedBy || \"Admin\"}</a>\n                  </li>\n                </ul>\n              </div>\n              <h1 className=\"mb_20\">{blog.title}</h1>\n\n              <div className=\"user-post d-flex align-items-center gap_20\">\n                <div className=\"avatar\">\n                  <img alt=\"avatar\" src=\"/images/avatar/avatar-1.jpg\" width={100} height={100} />\n                </div>\n                <p className=\"fw-7\">\n                  <span className=\"text_secodary2-color\">Post by</span>{\" \"}\n                  <a className=\"link\">{blog.postedBy || \"Admin\"}</a>\n                </p>\n              </div>\n            </div>\n\n            {blog.mainImage?.url && (\n              <div className=\"thumbs-post\">\n                <Image\n                  className=\"lazyload\"\n                  alt={blog.title}\n                  src={blog.mainImage.url}\n                  width={1350}\n                  height={1013}\n                  style={{ maxHeight: \"100vh\", objectFit: \"contain\" }}\n                  priority\n                />\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* main */}\n      <div className=\"main-content\">\n        <div className=\"single-post style-1\">\n          <div className=\"tf-container\">\n            <div className=\"row\">\n              {/* share bar (left) */}\n              <div className=\"col-lg-2 lg-hide\">\n                <div className=\"share-bar style-1 text-center sticky-top\">\n                  <h5 className=\"mb_20\">Share This Post</h5>\n                  <ul className=\"d-grid gap_10\">\n                    <SocialShare2 />\n                  </ul>\n                </div>\n              </div>\n\n              {/* content + sidebar */}\n              <div className=\"col-lg-10\">\n                <div className=\"content-inner\">\n                  <div className=\"wrap-post-details\">\n                    <div\n                      className=\"post-details\"\n                      dangerouslySetInnerHTML={{ __html: blog.contentHtml || \"\" }}\n                    />\n\n                    {/* prev / next */}\n                    <div className=\"tf-article-navigation\">\n                      {prevBlog ? (\n                        <div className=\"item prev\">\n                          <Link\n                            href={`/blog/${prevBlog.slug}`}\n                            className=\"hover-underline-link text-body-1 text_on-surface-color fw-7 mb_12\"\n                          >\n                            Previous\n                          </Link>\n                          <h6>\n                            <Link href={`/blog/${prevBlog.slug}`} className=\"link line-clamp-2\">\n                              {prevBlog.title}\n                            </Link>\n                          </h6>\n                        </div>\n                      ) : null}\n\n                      {nextBlog ? (\n                        <div className=\"item next\">\n                          <Link\n                            href={`/blog/${nextBlog.slug}`}\n                            className=\"hover-underline-link text-body-1 text_on-surface-color fw-7 mb_12\"\n                          >\n                            Next\n                          </Link>\n                          <h6>\n                            <Link href={`/blog/${nextBlog.slug}`} className=\"link line-clamp-2\">\n                              {nextBlog.title}\n                            </Link>\n                          </h6>\n                        </div>\n                      ) : null}\n                    </div>\n                  </div>\n\n                  {/* comments + sidebar (keep your existing components) */}\n                  <Comment />\n                  <Sidebar />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Related Posts by category */}\n        <div className=\"tf-container\">\n          <div className=\"heading-section mb_28\">\n            <h3 className=\"title\">Related Posts</h3>\n          </div>\n          <div className=\"tf-grid-layout xxl-col-4 sm-col-2\">\n            {related.map((b) => {\n              const card = toCardPost(b);\n              return <BlogCard1 key={b._id} post={card as any} />;\n            })}\n          </div>\n        </div>\n      </div>\n\n      <Footer1 parentClass=\"tf-container\" />\n    </>\n  );\n}\n"
        }
    ]
}