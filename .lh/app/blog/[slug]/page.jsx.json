{
    "sourceFile": "app/blog/[slug]/page.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1762453181493,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1762453181493,
            "name": "Commit-0",
            "content": "// app/blog/[slug]/page.tsx\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport { notFound } from \"next/navigation\";\n\ntype Blog = {\n  _id: string;\n  slug: string;\n  title: string;\n  postedBy?: string;\n  mainImage?: { url?: string };\n  category?: { name?: string; slug?: string };\n  contentHtml?: string;\n  createdAt?: string;\n  metaTitle?: string;\n  metaDescription?: string;\n};\n\nconst API = process.env.NEXT_PUBLIC_API_BASE!; // e.g. http://localhost:5000\n\nasync function getBlog(slug: string): Promise<Blog | null> {\n  const res = await fetch(`${API}/api/blogs/${slug}`, {\n    // cache a bit; tweak if you want preview-fresh\n    next: { revalidate: 120 },\n  });\n  if (res.status === 404) return null;\n  if (!res.ok) throw new Error(await res.text());\n  return res.json();\n}\n\nexport async function generateMetadata({ params }: { params: { slug: string } }) {\n  const blog = await getBlog(params.slug);\n  if (!blog) return { title: \"Not found\" };\n  return {\n    title: blog.metaTitle || blog.title,\n    description: blog.metaDescription || blog.title,\n    openGraph: {\n      title: blog.metaTitle || blog.title,\n      description: blog.metaDescription || blog.title,\n      type: \"article\",\n      url: `/blog/${blog.slug}`,\n      images: blog.mainImage?.url ? [{ url: blog.mainImage.url }] : undefined,\n    },\n  };\n}\n\nexport default async function Page({ params }: { params: { slug: string } }) {\n  const blog = await getBlog(params.slug);\n  if (!blog) return notFound();\n\n  return (\n    <div>\n      {/* breadcrumb */}\n      <div className=\"bg-surface2-color\">\n        <div className=\"tf-container\">\n          <ul className=\"breadcrumb text-caption-1 text_on-surface-color\">\n            <li><Link href=\"/\" className=\"link\">Home</Link></li>\n            <li>\n              <Link href={`/categories-1`}>\n                {blog.category?.name || \"Category\"}\n              </Link>\n            </li>\n            <li>{blog.title}</li>\n          </ul>\n        </div>\n      </div>\n\n      {/* heading */}\n      <div className=\"heading-post style-1\">\n        <div className=\"tf-container\">\n          <div className=\"post-inner\">\n            <div className=\"content\">\n              <div className=\"wrap-meta-feature d-flex align-items-center\">\n                <span className=\"tag\">\n                  <a className=\"text-title text_white\">\n                    {blog.category?.name || \"General\"}\n                  </a>\n                </span>\n                <ul className=\"meta-feature fw-7 d-flex mb_16 text-body-1 mb-0 align-items-center\">\n                  <li>{new Date(blog.createdAt || \"\").toDateString()}</li>\n                  <li>\n                    <span className=\"text_secodary2-color\">POST BY</span>{\" \"}\n                    <a className=\"link\">{blog.postedBy || \"Admin\"}</a>\n                  </li>\n                </ul>\n              </div>\n              <h1 className=\"mb_20\">{blog.title}</h1>\n            </div>\n\n            {blog.mainImage?.url && (\n              <div className=\"thumbs-post\">\n                {/* If you haven’t allowed Cloudinary in next.config, add it */}\n                <Image\n                  src={blog.mainImage.url}\n                  alt={blog.title}\n                  width={1350}\n                  height={1013}\n                  style={{ maxHeight: \"100vh\", objectFit: \"contain\" }}\n                />\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* content */}\n      <div className=\"tf-container\">\n        <div className=\"single-post style-1\">\n          <div className=\"row\">\n            <div className=\"col-lg-10\">\n              <div className=\"content-inner\">\n                <div className=\"wrap-post-details\">\n                  <div\n                    className=\"post-details\"\n                    // contentHtml comes from your editor — already sanitized in your admin flow\n                    dangerouslySetInnerHTML={{ __html: blog.contentHtml || \"\" }}\n                  />\n                </div>\n              </div>\n            </div>\n            {/* keep your sidebar / share bars later as needed */}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"
        }
    ]
}