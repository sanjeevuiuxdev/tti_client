{
    "sourceFile": "app/(categories)/all-posts/page.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1763991348957,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1763991348957,
            "name": "Commit-0",
            "content": "import Link from \"next/link\";\r\nimport Header1 from \"@/components/headers/Header1\";\r\nimport Footer1 from \"@/components/footers/Footer1\";\r\nimport CategoriSlider from \"@/components/features/CategoriSlider\";\r\nimport Pagination from \"@/components/common/Pagination\";\r\nimport BlogCard4 from \"@/components/blog-cards/BlogCard4\";\r\nimport BlogSidebar from \"@/components/features/BlogSidebar\"; // ✅ added\r\nimport type { Metadata } from \"next\";\r\n\r\nexport const metadata: Metadata = {\r\n  title: \"All Blogs\",\r\n  description: \"All Blogs\",\r\n};\r\n\r\ntype Blog = {\r\n  _id: string;\r\n  slug: string;\r\n  title: string;\r\n  postedBy?: string;\r\n  mainImage?: { url?: string };\r\n  category?: { name?: string; slug?: string };\r\n  createdAt?: string;\r\n  contentHtml?: string;\r\n};\r\n\r\nexport default async function Page({\r\n  searchParams,\r\n}: {\r\n  searchParams: Promise<{ [key: string]: string | string[] | undefined }>;\r\n}) {\r\n  const filters = await searchParams;\r\n  const page = Number(filters.page) || 1;\r\n  const q = (Array.isArray(filters.q) ? filters.q[0] : filters.q) || \"\";\r\n  const perPage = 4;\r\n  const API = process.env.NEXT_PUBLIC_API_BASE!;\r\n\r\n  // Fetch all blogs\r\n  const res = await fetch(`${API}/api/blogs`, { next: { revalidate: 60 } });\r\n  if (!res.ok) throw new Error(await res.text());\r\n  const allBlogs: Blog[] = await res.json();\r\n\r\n  // Search (frontend)\r\n  const filtered = allBlogs.filter((b) =>\r\n    q\r\n      ? b.title.toLowerCase().includes(q.toLowerCase()) ||\r\n        (b.contentHtml || \"\").toLowerCase().includes(q.toLowerCase())\r\n      : true\r\n  );\r\n\r\n  // Pagination\r\n  const totalPages = Math.ceil(filtered.length / perPage);\r\n  const visible = filtered.slice((page - 1) * perPage, page * perPage);\r\n\r\n  return (\r\n    <>\r\n      <Header1 />\r\n\r\n      {/* breadcrumb */}\r\n      <div className=\"bg-surface2-color\">\r\n        <div className=\"tf-container\">\r\n          <ul className=\"breadcrumb text-caption-1 text_on-surface-color\">\r\n            <li>\r\n              <Link href=\"/\" className=\"link\">\r\n                Home\r\n              </Link>\r\n            </li>\r\n            <li>All Post</li>\r\n            {/* <li>Life Style</li> */}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n\r\n      {/* page title */}\r\n      {/* <div className=\"page-title style-default\">\r\n        <div className=\"tf-container\">\r\n          <div className=\"title d-flex align-items-center gap_16\">\r\n            <h1 className=\"mb_12\">Life Style</h1>\r\n            <span className=\"tag text-caption-1 black-on-dark text_white\">\r\n              {filtered.length} article{filtered.length === 1 ? \"\" : \"s\"}\r\n            </span>\r\n          </div>\r\n          <p>\r\n            Your destination for discovering new ways to enhance your lifestyle\r\n            from mindful living and travel <br /> adventures to style, wellness, and\r\n            beyond.\r\n          </p>\r\n        </div>\r\n      </div> */}\r\n\r\n      <div className=\"main-content\">\r\n        <div className=\"list-features-post sw-layout pt-0 tf-spacing-1\">\r\n          <div className=\"tf-container\">\r\n            {/* top slider */}\r\n            {/* <CategoriSlider /> */}\r\n\r\n            {/* Search box (frontend only) */}\r\n            <div className=\"mobile_show\"> \r\n              <form action=\"/categories-2\" method=\"get\" className=\"mb_24 d-flex gap_8 align_center\">\r\n                <input\r\n                  name=\"q\"\r\n                  defaultValue={q}\r\n                  placeholder=\"Search articles...\"\r\n                  className=\"tf-input\"\r\n                  type=\"text\"\r\n                  style={{ minWidth: 260 }}\r\n                />\r\n                <button className=\"tf-btn\" type=\"submit\">\r\n                  Search\r\n                </button>\r\n              </form>\r\n            </div>\r\n\r\n            <div className=\"row\">\r\n              <div className=\"col-lg-9\">\r\n                {/* Blog list */}\r\n                <div>\r\n                  {visible.length ? (\r\n                    visible.map((post) => <BlogCard4 \r\n                    // post={post as any} \r\n                    post={{ ...post, id: String(post._id) }}\r\n                    key={post._id} />)\r\n                  ) : (\r\n                    <p>No articles found.</p>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Pagination */}\r\n                {totalPages > 1 && (\r\n                  <ul className=\"wg-pagination d-flex gap_12\">\r\n                    <Pagination pages={totalPages} currentPage={page} />\r\n                  </ul>\r\n                )}\r\n              </div>\r\n\r\n              {/* ✅ Real sidebar */}\r\n              <div className=\"col-lg-3\">\r\n                <div className=\"desktop_show\">\r\n                <form action=\"/categories-2\" method=\"get\" className=\"mb_24 d-flex gap_8\">\r\n              <input\r\n                name=\"q\"\r\n                defaultValue={q}\r\n                placeholder=\"Search articles...\"\r\n                className=\"tf-input\"\r\n                type=\"text\"\r\n                style={{ minWidth: 260 }}\r\n              />\r\n              <button className=\"tf-btn\" type=\"submit\">\r\n                Search\r\n              </button>\r\n            </form>\r\n                </div>\r\n                <BlogSidebar />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <Footer1 />\r\n\r\n      <style>{`\r\n      .mobile_show{display:none}\r\n      .mobile_show form{align-items:center}\r\n      .main-content{padding-top:40px}\r\n      @media(max-width:475px){\r\n        .desktop_show{display:none}\r\n      .mobile_show{display:block}\r\n      }\r\n      `}</style>\r\n    </>\r\n  );\r\n}\r\n\r\n"
        }
    ]
}