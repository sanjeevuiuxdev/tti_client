{
    "sourceFile": "app/categories/[slug]/page.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1762540860511,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1762617644849,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -97,18 +97,21 @@\n       <div className=\"main-content\">\n         <div className=\"list-features-post sw-layout pt-0 tf-spacing-1\">\n           <div className=\"tf-container\">\n             {/* Search (frontend) */}\n+            <div className=\"mobile_show\">\n             <form action={`/categories/${slug}`} method=\"get\" className=\"mb_24 d-flex gap_8\">\n               <input\n                 name=\"q\"\n                 defaultValue={q}\n                 placeholder=\"Search in this category…\"\n                 className=\"tf-input\"\n+                type=\"text\"\n                 style={{ minWidth: 260 }}\n               />\n               <button className=\"tf-btn\" type=\"submit\">Search</button>\n             </form>\n+            </div>\n \n             <div className=\"row\">\n               <div className=\"col-lg-9\">\n                 {/* List */}\n@@ -129,15 +132,39 @@\n               </div>\n \n               {/* Sidebar */}\n               <div className=\"col-lg-3\">\n+              <div className=\"desktop_show\">\n+            <form action={`/categories/${slug}`} method=\"get\" className=\"mb_24 d-flex gap_8\">\n+              <input\n+                name=\"q\"\n+                defaultValue={q}\n+                placeholder=\"Search in this category…\"\n+                className=\"tf-input\"\n+                type=\"text\"\n+                style={{ minWidth: 260 }}\n+              />\n+              <button className=\"tf-btn\" type=\"submit\">Search</button>\n+            </form>\n+            </div>\n                 <BlogSidebar />\n               </div>\n             </div>\n           </div>\n         </div>\n       </div>\n \n       <Footer1 />\n+\n+\n+      <style>{`\n+      .mobile_show{display:none}\n+      .mobile_show form{align-items:center}\n+      .main-content{padding-top:40px}\n+      @media(max-width:475px){\n+        .desktop_show{display:none}\n+      .mobile_show{display:block}\n+      }\n+      `}</style>\n     </>\n   );\n }\n"
                }
            ],
            "date": 1762540860511,
            "name": "Commit-0",
            "content": "import Link from \"next/link\";\nimport Header1 from \"@/components/headers/Header1\";\nimport Footer1 from \"@/components/footers/Footer1\";\nimport Pagination from \"@/components/common/Pagination\";\nimport BlogCard4 from \"@/components/blog-cards/BlogCard4\";\nimport BlogSidebar from \"@/components/features/BlogSidebar\";\n\ntype Blog = {\n  _id: string;\n  slug: string;\n  title: string;\n  postedBy?: string;\n  mainImage?: { url?: string };\n  category?: { name?: string; slug?: string };\n  createdAt?: string;\n  contentHtml?: string;\n};\n\ntype Category = { _id: string; name: string; slug: string };\n\nexport default async function Page({\n  params,\n  searchParams,\n}: {\n  params: Promise<{ slug: string }>;\n  searchParams: Promise<{ [k: string]: string | string[] | undefined }>;\n}) {\n  const { slug } = await params;\n  const filters = await searchParams;\n\n  const page = Number(filters.page) || 1;\n  const q = (Array.isArray(filters.q) ? filters.q[0] : filters.q) || \"\";\n  const perPage = 4;\n  const API = process.env.NEXT_PUBLIC_API_BASE!;\n\n  // Fetch categories to resolve the display name\n  const catRes = await fetch(`${API}/api/categories`, { next: { revalidate: 60 } });\n  if (!catRes.ok) throw new Error(await catRes.text());\n  const categories: Category[] = await catRes.json();\n  const activeCat = categories.find((c) => c.slug === slug) || {\n    name: slug.replace(/-/g, \" \").replace(/\\b\\w/g, (m) => m.toUpperCase()),\n    slug,\n    _id: \"\",\n  };\n\n  // Fetch all blogs then filter by category slug (keeps it simple)\n  const res = await fetch(`${API}/api/blogs`, { next: { revalidate: 60 } });\n  if (!res.ok) throw new Error(await res.text());\n  const allBlogs: Blog[] = await res.json();\n\n  const byCategory = allBlogs.filter((b) => b.category?.slug === slug);\n\n  // Frontend search inside this category\n  const searched = byCategory.filter((b) =>\n    q\n      ? b.title.toLowerCase().includes(q.toLowerCase()) ||\n        (b.contentHtml || \"\").toLowerCase().includes(q.toLowerCase())\n      : true\n  );\n\n  const totalPages = Math.ceil(searched.length / perPage);\n  const visible = searched.slice((page - 1) * perPage, page * perPage);\n\n  return (\n    <>\n      <Header1 />\n\n      {/* breadcrumb */}\n      <div className=\"bg-surface2-color\">\n        <div className=\"tf-container\">\n          <ul className=\"breadcrumb text-caption-1 text_on-surface-color\">\n            <li>\n              <Link href=\"/\" className=\"link\">Home</Link>\n            </li>\n            <li>Categories</li>\n            <li>{activeCat.name}</li>\n          </ul>\n        </div>\n      </div>\n\n      {/* page title */}\n      <div className=\"page-title style-default\">\n        <div className=\"tf-container\">\n          <div className=\"title d-flex align-items-center gap_16\">\n            <h1 className=\"mb_12\">{activeCat.name}</h1>\n            <span className=\"tag text-caption-1 black-on-dark text_white\">\n              {searched.length} article{searched.length === 1 ? \"\" : \"s\"}\n            </span>\n          </div>\n          {/* Optional blurb—ditch if you don't want copy here */}\n          <p>\n            Latest posts in <strong>{activeCat.name}</strong>.\n          </p>\n        </div>\n      </div>\n\n      <div className=\"main-content\">\n        <div className=\"list-features-post sw-layout pt-0 tf-spacing-1\">\n          <div className=\"tf-container\">\n            {/* Search (frontend) */}\n            <form action={`/categories/${slug}`} method=\"get\" className=\"mb_24 d-flex gap_8\">\n              <input\n                name=\"q\"\n                defaultValue={q}\n                placeholder=\"Search in this category…\"\n                className=\"tf-input\"\n                style={{ minWidth: 260 }}\n              />\n              <button className=\"tf-btn\" type=\"submit\">Search</button>\n            </form>\n\n            <div className=\"row\">\n              <div className=\"col-lg-9\">\n                {/* List */}\n                <div>\n                  {visible.length ? (\n                    visible.map((post) => <BlogCard4 post={post as any} key={post._id} />)\n                  ) : (\n                    <p>No articles found.</p>\n                  )}\n                </div>\n\n                {/* Pagination */}\n                {totalPages > 1 && (\n                  <ul className=\"wg-pagination d-flex gap_12\">\n                    <Pagination pages={totalPages} currentPage={page} />\n                  </ul>\n                )}\n              </div>\n\n              {/* Sidebar */}\n              <div className=\"col-lg-3\">\n                <BlogSidebar />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <Footer1 />\n    </>\n  );\n}\n"
        }
    ]
}