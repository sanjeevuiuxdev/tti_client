{
    "sourceFile": "components/blog-single/Comment.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1762458568714,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1762546058424,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -86,8 +86,9 @@\n           <div className=\"col-md-6\">\r\n             <input\r\n               className=\"tf-input\"\r\n               placeholder=\"Your Name*\"\r\n+              \r\n               value={name}\r\n               onChange={(e) => setName(e.target.value)}\r\n               required\r\n             />\r\n"
                },
                {
                    "date": 1762546135546,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -86,9 +86,9 @@\n           <div className=\"col-md-6\">\r\n             <input\r\n               className=\"tf-input\"\r\n               placeholder=\"Your Name*\"\r\n-              \r\n+              type=\"text\"\r\n               value={name}\r\n               onChange={(e) => setName(e.target.value)}\r\n               required\r\n             />\r\n"
                },
                {
                    "date": 1762546247971,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,9 @@\n \r\n   return (\r\n     <>\r\n       {/* List */}\r\n-      <div className=\"wrap-post-details mt-40\">\r\n+      <div className=\"wrap-post-details mt_40\">\r\n         <div className=\"post-details\">\r\n           <h3 className=\"mb_20\">{String(rows.length).padStart(2, \"0\")} Comments</h3>\r\n           {rows.map((c) => (\r\n             <div key={c._id} className=\"comment-item mb_20\">\r\n"
                },
                {
                    "date": 1762546364239,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,9 @@\n \r\n   return (\r\n     <>\r\n       {/* List */}\r\n-      <div className=\"wrap-post-details\" style={{}}>\r\n+      <div className=\"wrap-post-details\" style={{m}}>\r\n         <div className=\"post-details\">\r\n           <h3 className=\"mb_20\">{String(rows.length).padStart(2, \"0\")} Comments</h3>\r\n           {rows.map((c) => (\r\n             <div key={c._id} className=\"comment-item mb_20\">\r\n"
                }
            ],
            "date": 1762458568714,
            "name": "Commit-0",
            "content": "// DROZY_NEXTJS_APP/app/components/blog-single/Comment.tsx\r\n\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\n\r\ntype CommentRow = {\r\n  _id: string;\r\n  name: string;\r\n  email: string;\r\n  message: string;\r\n  createdAt?: string;\r\n};\r\n\r\nexport default function Comment({ postId }: { postId: string }) {\r\n  const API = process.env.NEXT_PUBLIC_API_BASE!;\r\n  const [rows, setRows] = useState<CommentRow[]>([]);\r\n  const [name, setName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n  const [sending, setSending] = useState(false);\r\n\r\n  async function load() {\r\n    if (!postId) return;\r\n    const r = await fetch(`${API}/api/comments?postId=${postId}`, { cache: \"no-store\" });\r\n    if (r.ok) setRows(await r.json());\r\n  }\r\n\r\n  useEffect(() => { load(); /* eslint-disable-next-line */ }, [postId]);\r\n\r\n  async function submit(e: React.FormEvent) {\r\n    e.preventDefault();\r\n    if (!name || !email || !message) return alert(\"Fill all fields\");\r\n\r\n    setSending(true);\r\n    try {\r\n      const r = await fetch(`${API}/api/comments`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ postId, name, email, message }),\r\n      });\r\n      if (!r.ok) {\r\n        const t = await r.json().catch(() => ({}));\r\n        alert(t.error || \"Failed\");\r\n      } else {\r\n        // clear the form; comment awaits approval\r\n        setName(\"\"); setEmail(\"\"); setMessage(\"\");\r\n        alert(\"Thanks! Your comment will appear after approval.\");\r\n      }\r\n    } finally {\r\n      setSending(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* List */}\r\n      <div className=\"wrap-post-details\">\r\n        <div className=\"post-details\">\r\n          <h3 className=\"mb_20\">{String(rows.length).padStart(2, \"0\")} Comments</h3>\r\n          {rows.map((c) => (\r\n            <div key={c._id} className=\"comment-item mb_20\">\r\n              <div className=\"d-flex gap_16 align-items-start\">\r\n                <div className=\"avatar sz-56 bg-surface2-color rounded-circle\" />\r\n                <div className=\"flex-1\">\r\n                  <div className=\"d-flex align-items-center gap_8 mb_4\">\r\n                    <h6 className=\"mb-0\">{c.name}</h6>\r\n                    <span className=\"badge bg-success\" style={{ fontSize: 10 }}>âœ”</span>\r\n                  </div>\r\n                  <div className=\"text-body-2 text_on-surface-color mb_8\">\r\n                    {new Date(c.createdAt || Date.now()).toLocaleDateString()}\r\n                  </div>\r\n                  <p className=\"mb_8\">{c.message}</p>\r\n                  <div className=\"text_secodary2-color fw-7\">Reply</div>\r\n                </div>\r\n              </div>\r\n              <div className=\"divider mt_16\" />\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Form */}\r\n      <div className=\"leave-comment mt_28\">\r\n        <h3 className=\"mb_16\">Leave A Comment</h3>\r\n        <form onSubmit={submit} className=\"row g-3\">\r\n          <div className=\"col-md-6\">\r\n            <input\r\n              className=\"tf-input\"\r\n              placeholder=\"Your Name*\"\r\n              value={name}\r\n              onChange={(e) => setName(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"col-md-6\">\r\n            <input\r\n              className=\"tf-input\"\r\n              placeholder=\"Your Email*\"\r\n              type=\"email\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"col-12\">\r\n            <textarea\r\n              className=\"tf-textarea\"\r\n              placeholder=\"Your Comment*\"\r\n              rows={5}\r\n              value={message}\r\n              onChange={(e) => setMessage(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"col-12\">\r\n            <button className=\"tf-btn\" disabled={sending}>\r\n              {sending ? \"Submitting...\" : \"Submit Review\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"
        }
    ]
}