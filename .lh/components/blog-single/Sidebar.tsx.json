{
    "sourceFile": "components/blog-single/Sidebar.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1762456384056,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1762541758285,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,17 +1,40 @@\n-import { tags } from \"@/data/blogCategories\";\r\n-import { postItems, posts } from \"@/data/blogs\";\r\n+\"use client\";\r\n+\r\n+import { useEffect, useState } from \"react\";\r\n import Image from \"next/image\";\r\n import Link from \"next/link\";\r\n \r\n-import BlogCard1 from \"../blog-cards/BlogCard1\";\r\n-import { categoryLinks2 } from \"@/data/menu\";\r\n+type Category = {\r\n+  _id: string;\r\n+  name: string;\r\n+  slug: string;\r\n+  postCount?: number; // optional if your /api/categories adds counts later\r\n+};\r\n \r\n export default function Sidebar() {\r\n+  const [cats, setCats] = useState<Category[]>([]);\r\n+  const [loading, setLoading] = useState(true);\r\n+\r\n+  useEffect(() => {\r\n+    const ctrl = new AbortController();\r\n+    const API = process.env.NEXT_PUBLIC_API_BASE!;\r\n+    fetch(`${API}/api/categories`, { signal: ctrl.signal })\r\n+      .then(async (r) => {\r\n+        if (!r.ok) throw new Error(await r.text());\r\n+        return r.json();\r\n+      })\r\n+      .then((rows: Category[]) => setCats(rows))\r\n+      .catch(() => {})\r\n+      .finally(() => setLoading(false));\r\n+    return () => ctrl.abort();\r\n+  }, []);\r\n+\r\n   return (\r\n     <div className=\"sidebar\">\r\n+      {/* About Writer (unchanged) */}\r\n       <div className=\"sidebar__item about text-center\">\r\n-        <h5 className=\"sidebar__title\">About Write</h5>\r\n+        <h5 className=\"sidebar__title\">About Writer</h5>\r\n         <div className=\"box-author style-1 sidebar__item\">\r\n           <div className=\"info text-center\">\r\n             <div className=\"avatar mb_30\">\r\n               <Image\r\n@@ -21,11 +44,9 @@\n                 height={400}\r\n               />\r\n             </div>\r\n             <h4 className=\"mb_4\">\r\n-              <a href=\"#\" className=\"link\">\r\n-                Emma Carson\r\n-              </a>\r\n+              <a href=\"#\" className=\"link\">Emma Carson</a>\r\n             </h4>\r\n             <p className=\"text-body-1\">Portland, Oregon, USA</p>\r\n           </div>\r\n           <ul className=\"social\">\r\n@@ -49,29 +70,39 @@\n             </li>\r\n           </ul>\r\n         </div>\r\n       </div>\r\n+\r\n+      {/* Categories (dynamic) */}\r\n       <div className=\"sidebar__item\">\r\n         <h5 className=\"sidebar__title\">Categories</h5>\r\n-        <ul className=\"sidebar-categories\">\r\n-          {categoryLinks2.map(({ href, label, slug }) => (\r\n-            <li\r\n-              key={label}\r\n-              className=\"item d-flex align-items-center justify-content-between\"\r\n-            >\r\n-              <Link\r\n-                className=\"fw-7 text-body-1 text_on-surface-color\"\r\n-                href={`${href}/${slug}`}\r\n-              >\r\n-                {label}\r\n-              </Link>\r\n-              <span className=\"number\">\r\n-                {posts.filter((el) => el.category == label).length}\r\n-              </span>\r\n-            </li>\r\n-          ))}\r\n-        </ul>\r\n+\r\n+        {loading ? (\r\n+          <p>Loadingâ€¦</p>\r\n+        ) : (\r\n+          <ul className=\"sidebar-categories\">\r\n+            {cats.length ? (\r\n+              cats.map((c) => (\r\n+                <li\r\n+                  key={c._id}\r\n+                  className=\"item d-flex align-items-center justify-content-between\"\r\n+                >\r\n+                  <Link\r\n+                    className=\"fw-7 text-body-1 text_on-surface-color\"\r\n+                    href={`/categories/${c.slug}`}\r\n+                  >\r\n+                    {c.name}\r\n+                  </Link>\r\n+                  {typeof c.postCount === \"number\" ? (\r\n+                    <span className=\"number\">{c.postCount}</span>\r\n+                  ) : null}\r\n+                </li>\r\n+              ))\r\n+            ) : (\r\n+              <li>No categories found.</li>\r\n+            )}\r\n+          </ul>\r\n+        )}\r\n       </div>\r\n-      \r\n     </div>\r\n   );\r\n }\r\n"
                },
                {
                    "date": 1762620679645,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,9 +32,9 @@\n   return (\r\n     <div className=\"sidebar\">\r\n       {/* About Writer (unchanged) */}\r\n       <div className=\"sidebar__item about text-center\">\r\n-        <h5 className=\"sidebar__title\">About Writer</h5>\r\n+        {/* <h5 className=\"sidebar__title\">About Writer</h5> */}\r\n         <div className=\"box-author style-1 sidebar__item\">\r\n           <div className=\"info text-center\">\r\n             <div className=\"avatar mb_30\">\r\n               <Image\r\n"
                },
                {
                    "date": 1762620758964,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,11 +31,11 @@\n \r\n   return (\r\n     <div className=\"sidebar\">\r\n       {/* About Writer (unchanged) */}\r\n-      <div className=\"sidebar__item about text-center\">\r\n+      {/* <div className=\"sidebar__item about text-center\"> */}\r\n         {/* <h5 className=\"sidebar__title\">About Writer</h5> */}\r\n-        <div className=\"box-author style-1 sidebar__item\">\r\n+        {/* <div className=\"box-author style-1 sidebar__item\">\r\n           <div className=\"info text-center\">\r\n             <div className=\"avatar mb_30\">\r\n               <Image\r\n                 alt=\"avatar\"\r\n@@ -68,10 +68,10 @@\n                 32k Follower\r\n               </a>\r\n             </li>\r\n           </ul>\r\n-        </div>\r\n-      </div>\r\n+        </div> */}\r\n+      {/* </div> */}\r\n \r\n       {/* Categories (dynamic) */}\r\n       <div className=\"sidebar__item\">\r\n         <h5 className=\"sidebar__title\">Categories</h5>\r\n"
                }
            ],
            "date": 1762456384056,
            "name": "Commit-0",
            "content": "import { tags } from \"@/data/blogCategories\";\r\nimport { postItems, posts } from \"@/data/blogs\";\r\nimport Image from \"next/image\";\r\nimport Link from \"next/link\";\r\n\r\nimport BlogCard1 from \"../blog-cards/BlogCard1\";\r\nimport { categoryLinks2 } from \"@/data/menu\";\r\n\r\nexport default function Sidebar() {\r\n  return (\r\n    <div className=\"sidebar\">\r\n      <div className=\"sidebar__item about text-center\">\r\n        <h5 className=\"sidebar__title\">About Write</h5>\r\n        <div className=\"box-author style-1 sidebar__item\">\r\n          <div className=\"info text-center\">\r\n            <div className=\"avatar mb_30\">\r\n              <Image\r\n                alt=\"avatar\"\r\n                src=\"/images/avatar/main-avatar.jpg\"\r\n                width={400}\r\n                height={400}\r\n              />\r\n            </div>\r\n            <h4 className=\"mb_4\">\r\n              <a href=\"#\" className=\"link\">\r\n                Emma Carson\r\n              </a>\r\n            </h4>\r\n            <p className=\"text-body-1\">Portland, Oregon, USA</p>\r\n          </div>\r\n          <ul className=\"social\">\r\n            <li className=\"text-title fw-7 text_on-surface-color\">\r\n              <a href=\"#\" className=\"d-flex align-items-center gap_12\">\r\n                <i className=\"icon-FacebookLogo\" />\r\n                23k Likes\r\n              </a>\r\n            </li>\r\n            <li className=\"text-title fw-7 text_on-surface-color\">\r\n              <a href=\"#\" className=\"d-flex align-items-center gap_12\">\r\n                <i className=\"icon-XLogo\" />\r\n                41k Follower\r\n              </a>\r\n            </li>\r\n            <li className=\"text-title fw-7 text_on-surface-color\">\r\n              <a href=\"#\" className=\"d-flex align-items-center gap_12\">\r\n                <i className=\"icon-PinterestLogo\" />\r\n                32k Follower\r\n              </a>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <div className=\"sidebar__item\">\r\n        <h5 className=\"sidebar__title\">Categories</h5>\r\n        <ul className=\"sidebar-categories\">\r\n          {categoryLinks2.map(({ href, label, slug }) => (\r\n            <li\r\n              key={label}\r\n              className=\"item d-flex align-items-center justify-content-between\"\r\n            >\r\n              <Link\r\n                className=\"fw-7 text-body-1 text_on-surface-color\"\r\n                href={`${href}/${slug}`}\r\n              >\r\n                {label}\r\n              </Link>\r\n              <span className=\"number\">\r\n                {posts.filter((el) => el.category == label).length}\r\n              </span>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n      \r\n    </div>\r\n  );\r\n}\r\n"
        }
    ]
}