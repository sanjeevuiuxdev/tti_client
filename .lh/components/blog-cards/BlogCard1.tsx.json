{
    "sourceFile": "components/blog-cards/BlogCard1.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 6,
            "patches": [
                {
                    "date": 1762369630066,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1762369691673,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,69 +1,60 @@\n-// Server Component: no \"use client\"\r\n-import BlogCard1 from \"@/components/blog-cards/BlogCard1\";\r\n-import { fetchBlogs } from \"@/lib/blogs\";\r\n+import { BlogPost } from \"@/types/blog-post\";\r\n+import Image from \"next/image\";\r\n+import Link from \"next/link\";\r\n \r\n-type Blog = {\r\n-  _id: string;\r\n-  title: string;\r\n-  slug: string;\r\n-  postedBy?: string;\r\n-  mainImage?: { url?: string };\r\n-  category?: { name: string; slug: string };\r\n-  createdAt?: string;\r\n-  contentHtml?: string;\r\n-};\r\n-\r\n-// tiny helper: strip HTML for a short excerpt\r\n-function plain(text = \"\", max = 120) {\r\n-  const s = text.replace(/<[^>]+>/g, \" \").replace(/\\s+/g, \" \").trim();\r\n-  return s.length > max ? s.slice(0, max) + \"…\" : s;\r\n-}\r\n-\r\n-// format a readable date string\r\n-function fmtDate(iso?: string) {\r\n-  if (!iso) return \"\";\r\n-  try {\r\n-    return new Date(iso).toLocaleDateString(\"en-GB\", {\r\n-      day: \"2-digit\",\r\n-      month: \"short\",\r\n-      year: \"numeric\",\r\n-    });\r\n-  } catch {\r\n-    return \"\";\r\n-  }\r\n-}\r\n-\r\n-// Adapt backend Blog → BlogCard1 expected props\r\n-function toCardPost(b: Blog) {\r\n-  return {\r\n-    id: b.slug,                            // BlogCard1 links use `id`; give it the slug\r\n-    imgSrc: b.mainImage?.url || \"\",        // ✅ BlogCard1 reads `imgSrc`\r\n-    category: b.category?.name || \"\",\r\n-    author: b.postedBy || \"\",\r\n-    date: fmtDate(b.createdAt),\r\n-    title: b.title,\r\n-    excerpt: plain(b.contentHtml || \"\", 140),\r\n-  };\r\n-}\r\n-\r\n-export default async function LatestPosts() {\r\n-  // only the section you want on this block\r\n-  const blogs = await fetchBlogs({ section: \"latest_posts\", limit: 6 });\r\n-  const items = blogs.map(toCardPost);\r\n-\r\n-  if (!items.length) return null;\r\n-\r\n+export default function BlogCard1({ post }: { post: BlogPost }) {\r\n   return (\r\n-    <div className=\"tf-container tf-spacing-1\">\r\n-      <div className=\"heading-section mb_28\">\r\n-        <h3 className=\"title\">Latest Posts</h3>\r\n+    <div className=\"feature-post-item style-default hover-image-translate\">\r\n+      {post.imgSrc ? (\r\n+        <div className=\"img-style mb_24\">\r\n+          <Image\r\n+            className=\"lazyload\"\r\n+            sizes=\"(max-width: 328px) 100vw, 328px\"\r\n+            width={328}\r\n+            height={246}\r\n+            alt=\"feature post\"\r\n+            src={post.imgSrc}\r\n+          />\r\n+          <div className=\"wrap-tag\">\r\n+            <Link\r\n+              href={`/categories-1`}\r\n+              className=\"tag categories text-caption-2 text_white\"\r\n+            >\r\n+              {post.category}\r\n+            </Link>\r\n+            <div className=\"tag time text-caption-2 text_white\">\r\n+              <i className=\"icon-Timer\" /> 4 Mins read\r\n+            </div>\r\n+          </div>\r\n+          <Link href={`/single-post-1/${post.id}`} className=\"overlay-link\" />\r\n+        </div>\r\n+      ) : (\r\n+        \"\"\r\n+      )}\r\n+      <div className=\"content\">\r\n+        <ul className=\"meta-feature fw-7 d-flex text-caption-2 text-uppercase mb_12\">\r\n+          <li>{post.date}</li>\r\n+          <li>\r\n+            <span className=\"text_secodary2-color\">POST BY</span>\r\n+            <a href=\"#\" className=\"link\">\r\n+              {post.author}\r\n+            </a>\r\n+          </li>\r\n+        </ul>\r\n+        <h5 className=\"title\">\r\n+          <Link\r\n+            href={`/single-post-1/${post.id}`}\r\n+            className=\"line-clamp-2 link\"\r\n+          >\r\n+            {post.title}\r\n+          </Link>\r\n+        </h5>\r\n+        {post.excerpt ? (\r\n+          <p className=\"text-body-1 line-clamp-2\">{post.excerpt}</p>\r\n+        ) : (\r\n+          \"\"\r\n+        )}\r\n       </div>\r\n-\r\n-      <div className=\"tf-grid-layout xxl-col-4 sm-col-2\">\r\n-        {items.map((post) => (\r\n-          <BlogCard1 key={post.id} post={post} />\r\n-        ))}\r\n-      </div>\r\n     </div>\r\n   );\r\n }\r\n"
                },
                {
                    "date": 1762450497233,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,9 +25,9 @@\n             <div className=\"tag time text-caption-2 text_white\">\r\n               <i className=\"icon-Timer\" /> 4 Mins read\r\n             </div>\r\n           </div>\r\n-          <Link href={`/single-post-1/${post.id}`} className=\"overlay-link\" />\r\n+          <Link href={`/blog/${post.slug}`} className=\"overlay-link\" />\r\n         </div>\r\n       ) : (\r\n         \"\"\r\n       )}\r\n"
                },
                {
                    "date": 1762450547571,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,9 +42,9 @@\n           </li>\r\n         </ul>\r\n         <h5 className=\"title\">\r\n           <Link\r\n-            href={`/single-post-1/${post.id}`}\r\n+            href={`/blog/${post.slug}`}\r\n             className=\"line-clamp-2 link\"\r\n           >\r\n             {post.title}\r\n           </Link>\r\n"
                },
                {
                    "date": 1762889206117,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,60 +1,122 @@\n-import { BlogPost } from \"@/types/blog-post\";\r\n import Image from \"next/image\";\r\n import Link from \"next/link\";\r\n \r\n-export default function BlogCard1({ post }: { post: BlogPost }) {\r\n+/** Accepts either:\r\n+ * API post: {_id, slug, title, mainImage.url, category:{name,slug}, postedBy, createdAt, contentHtml}\r\n+ * Seeded post: {id:number|string, title, imgSrc, category:string, author, date, excerpt}\r\n+ */\r\n+type AnyPost = {\r\n+  // ids\r\n+  _id?: string;\r\n+  id?: string | number;\r\n+  slug?: string;\r\n+\r\n+  // core\r\n+  title: string;\r\n+\r\n+  // media\r\n+  imgSrc?: string;\r\n+  mainImage?: { url?: string };\r\n+\r\n+  // meta\r\n+  category?: string | { name?: string; slug?: string };\r\n+  author?: string;\r\n+  postedBy?: string;\r\n+  date?: string;        // \"12 Feb 2025\" etc.\r\n+  createdAt?: string;   // ISO\r\n+\r\n+  // body\r\n+  excerpt?: string;\r\n+  contentHtml?: string;\r\n+};\r\n+\r\n+function fmtDate(iso?: string, fallback?: string) {\r\n+  if (iso) {\r\n+    try {\r\n+      return new Date(iso).toLocaleDateString(\"en-GB\", {\r\n+        day: \"2-digit\",\r\n+        month: \"short\",\r\n+        year: \"numeric\",\r\n+      });\r\n+    } catch {}\r\n+  }\r\n+  return fallback || \"\";\r\n+}\r\n+\r\n+export default function BlogCard1({ post }: { post: AnyPost }) {\r\n+  const href = post.slug\r\n+    ? `/blog/${post.slug}` // API shape\r\n+    : `/single-post-1/${String(post.id ?? \"\")}`; // seeded/demo fallback\r\n+\r\n+  const img =\r\n+    post.mainImage?.url || post.imgSrc || \"/images/placeholder/977x550.webp\";\r\n+\r\n+  const catLabel =\r\n+    typeof post.category === \"string\"\r\n+      ? post.category\r\n+      : post.category?.name || \"\";\r\n+\r\n+  const author = post.postedBy || post.author || \"\";\r\n+  const date = fmtDate(post.createdAt, post.date);\r\n+\r\n+  const excerpt =\r\n+    post.excerpt ||\r\n+    (post.contentHtml\r\n+      ? post.contentHtml\r\n+          .replace(/<[^>]*>/g, \" \")\r\n+          .replace(/\\s+/g, \" \")\r\n+          .trim()\r\n+          .slice(0, 140) + \"…\"\r\n+      : \"\");\r\n+\r\n   return (\r\n     <div className=\"feature-post-item style-default hover-image-translate\">\r\n-      {post.imgSrc ? (\r\n+      {img && (\r\n         <div className=\"img-style mb_24\">\r\n           <Image\r\n             className=\"lazyload\"\r\n             sizes=\"(max-width: 328px) 100vw, 328px\"\r\n             width={328}\r\n             height={246}\r\n-            alt=\"feature post\"\r\n-            src={post.imgSrc}\r\n+            alt={post.title}\r\n+            src={img}\r\n           />\r\n           <div className=\"wrap-tag\">\r\n-            <Link\r\n-              href={`/categories-1`}\r\n-              className=\"tag categories text-caption-2 text_white\"\r\n-            >\r\n-              {post.category}\r\n-            </Link>\r\n+            {catLabel && (\r\n+              <Link\r\n+                href={`/categories-1`}\r\n+                className=\"tag categories text-caption-2 text_white\"\r\n+              >\r\n+                {catLabel}\r\n+              </Link>\r\n+            )}\r\n             <div className=\"tag time text-caption-2 text_white\">\r\n               <i className=\"icon-Timer\" /> 4 Mins read\r\n             </div>\r\n           </div>\r\n-          <Link href={`/blog/${post.slug}`} className=\"overlay-link\" />\r\n+          <Link href={href} className=\"overlay-link\" />\r\n         </div>\r\n-      ) : (\r\n-        \"\"\r\n       )}\r\n+\r\n       <div className=\"content\">\r\n         <ul className=\"meta-feature fw-7 d-flex text-caption-2 text-uppercase mb_12\">\r\n-          <li>{post.date}</li>\r\n-          <li>\r\n-            <span className=\"text_secodary2-color\">POST BY</span>\r\n-            <a href=\"#\" className=\"link\">\r\n-              {post.author}\r\n-            </a>\r\n-          </li>\r\n+          {date && <li>{date}</li>}\r\n+          {author && (\r\n+            <li>\r\n+              <span className=\"text_secodary2-color\">POST BY</span>\r\n+              <a className=\"link\">{author}</a>\r\n+            </li>\r\n+          )}\r\n         </ul>\r\n+\r\n         <h5 className=\"title\">\r\n-          <Link\r\n-            href={`/blog/${post.slug}`}\r\n-            className=\"line-clamp-2 link\"\r\n-          >\r\n+          <Link href={href} className=\"line-clamp-2 link\">\r\n             {post.title}\r\n           </Link>\r\n         </h5>\r\n-        {post.excerpt ? (\r\n-          <p className=\"text-body-1 line-clamp-2\">{post.excerpt}</p>\r\n-        ) : (\r\n-          \"\"\r\n-        )}\r\n+\r\n+        {excerpt && <p className=\"text-body-1 line-clamp-2\">{excerpt}</p>}\r\n       </div>\r\n     </div>\r\n   );\r\n }\r\n"
                },
                {
                    "date": 1762971800665,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,9 +45,9 @@\n \r\n export default function BlogCard1({ post }: { post: AnyPost }) {\r\n   const href = post.slug\r\n     ? `/blog/${post.slug}` // API shape\r\n-    : `/single-post-1/${String(post.id ?? \"\")}`; // seeded/demo fallback\r\n+    : `/blog/${String(post.id ?? \"\")}`; // seeded/demo fallback\r\n \r\n   const img =\r\n     post.mainImage?.url || post.imgSrc || \"/images/placeholder/977x550.webp\";\r\n \r\n"
                },
                {
                    "date": 1762971916886,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -89,11 +89,11 @@\n               >\r\n                 {catLabel}\r\n               </Link>\r\n             )}\r\n-            <div className=\"tag time text-caption-2 text_white\">\r\n+            {/* <div className=\"tag time text-caption-2 text_white\">\r\n               <i className=\"icon-Timer\" /> 4 Mins read\r\n-            </div>\r\n+            </div> */}\r\n           </div>\r\n           <Link href={href} className=\"overlay-link\" />\r\n         </div>\r\n       )}\r\n"
                }
            ],
            "date": 1762369630066,
            "name": "Commit-0",
            "content": "// Server Component: no \"use client\"\r\nimport BlogCard1 from \"@/components/blog-cards/BlogCard1\";\r\nimport { fetchBlogs } from \"@/lib/blogs\";\r\n\r\ntype Blog = {\r\n  _id: string;\r\n  title: string;\r\n  slug: string;\r\n  postedBy?: string;\r\n  mainImage?: { url?: string };\r\n  category?: { name: string; slug: string };\r\n  createdAt?: string;\r\n  contentHtml?: string;\r\n};\r\n\r\n// tiny helper: strip HTML for a short excerpt\r\nfunction plain(text = \"\", max = 120) {\r\n  const s = text.replace(/<[^>]+>/g, \" \").replace(/\\s+/g, \" \").trim();\r\n  return s.length > max ? s.slice(0, max) + \"…\" : s;\r\n}\r\n\r\n// format a readable date string\r\nfunction fmtDate(iso?: string) {\r\n  if (!iso) return \"\";\r\n  try {\r\n    return new Date(iso).toLocaleDateString(\"en-GB\", {\r\n      day: \"2-digit\",\r\n      month: \"short\",\r\n      year: \"numeric\",\r\n    });\r\n  } catch {\r\n    return \"\";\r\n  }\r\n}\r\n\r\n// Adapt backend Blog → BlogCard1 expected props\r\nfunction toCardPost(b: Blog) {\r\n  return {\r\n    id: b.slug,                            // BlogCard1 links use `id`; give it the slug\r\n    imgSrc: b.mainImage?.url || \"\",        // ✅ BlogCard1 reads `imgSrc`\r\n    category: b.category?.name || \"\",\r\n    author: b.postedBy || \"\",\r\n    date: fmtDate(b.createdAt),\r\n    title: b.title,\r\n    excerpt: plain(b.contentHtml || \"\", 140),\r\n  };\r\n}\r\n\r\nexport default async function LatestPosts() {\r\n  // only the section you want on this block\r\n  const blogs = await fetchBlogs({ section: \"latest_posts\", limit: 6 });\r\n  const items = blogs.map(toCardPost);\r\n\r\n  if (!items.length) return null;\r\n\r\n  return (\r\n    <div className=\"tf-container tf-spacing-1\">\r\n      <div className=\"heading-section mb_28\">\r\n        <h3 className=\"title\">Latest Posts</h3>\r\n      </div>\r\n\r\n      <div className=\"tf-grid-layout xxl-col-4 sm-col-2\">\r\n        {items.map((post) => (\r\n          <BlogCard1 key={post.id} post={post} />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"
        }
    ]
}