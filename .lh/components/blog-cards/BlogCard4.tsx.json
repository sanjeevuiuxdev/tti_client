{
    "sourceFile": "components/blog-cards/BlogCard4.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1762538594504,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1762886705204,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,125 +1,113 @@\n import Image from \"next/image\";\r\n import Link from \"next/link\";\r\n \r\n-// Accept either the old demo BlogPost or your API Blog\r\n+/** Accepts either:\r\n+ * - API post: {_id, slug, mainImage.url, category:{name,slug}, postedBy, createdAt, contentHtml}\r\n+ * - Seeded post: {id:number|string, imgSrc, category:string, author, date, excerpt}\r\n+ */\r\n type AnyPost = {\r\n-  // demo props\r\n-  id?: string;\r\n-  imgSrc?: string;\r\n-  author?: string;\r\n-  date?: string;\r\n-  excerpt?: string;\r\n-  category?: string | { name?: string; slug?: string };\r\n-\r\n-  // api props\r\n+  id?: string | number;\r\n   _id?: string;\r\n   slug?: string;\r\n   title: string;\r\n-  postedBy?: string;\r\n+  // images\r\n+  imgSrc?: string;\r\n   mainImage?: { url?: string };\r\n+  // category can be a string or an object\r\n+  category?: string | { name?: string; slug?: string };\r\n+  // meta\r\n+  date?: string;\r\n   createdAt?: string;\r\n+  author?: string;\r\n+  postedBy?: string;\r\n+  excerpt?: string;\r\n   contentHtml?: string;\r\n };\r\n \r\n+function fmtDate(iso?: string) {\r\n+  if (!iso) return \"\";\r\n+  try {\r\n+    return new Date(iso).toLocaleDateString(\"en-GB\", {\r\n+      day: \"2-digit\",\r\n+      month: \"short\",\r\n+      year: \"numeric\",\r\n+    });\r\n+  } catch {\r\n+    return \"\";\r\n+  }\r\n+}\r\n+\r\n export default function BlogCard4({ post }: { post: AnyPost }) {\r\n-  // normalize fields\r\n-  const slug = post.slug ?? post.id ?? \"\";\r\n+  // normalize inputs\r\n+  const href =\r\n+    post.slug\r\n+      ? `/blog/${post.slug}` // new API pages\r\n+      : `/single-post-1/${String(post.id ?? \"\")}`; // legacy demo pages\r\n+\r\n   const img =\r\n-    post.mainImage?.url ??\r\n-    post.imgSrc ??\r\n-    \"\"; // leave empty => no image tag rendered\r\n+    post.mainImage?.url || post.imgSrc || \"/images/placeholder/977x550.webp\";\r\n \r\n-  const author = post.postedBy ?? post.author ?? \"\";\r\n-  const date = post.date ?? fmtDate(post.createdAt);\r\n-  const title = post.title;\r\n-  const excerpt =\r\n-    post.excerpt ?? plain(post.contentHtml || \"\", 220);\r\n-\r\n-  // category can be string or object\r\n-  const categoryName =\r\n+  const catLabel =\r\n     typeof post.category === \"string\"\r\n       ? post.category\r\n       : post.category?.name || \"\";\r\n-  const categorySlug =\r\n-    typeof post.category === \"string\"\r\n-      ? undefined\r\n-      : post.category?.slug;\r\n \r\n-  const blogHref = slug ? `/blog/${slug}` : \"#\";\r\n-  const catHref = categorySlug ? `/categories/${categorySlug}` : `/categories-1`;\r\n+  const author = post.postedBy || post.author || \"\";\r\n+  const date = post.createdAt ? fmtDate(post.createdAt) : (post.date || \"\");\r\n \r\n+  const excerpt =\r\n+    post.excerpt ||\r\n+    (post.contentHtml\r\n+      ? post.contentHtml.replace(/<[^>]*>/g, \" \").replace(/\\s+/g, \" \").slice(0, 160) + \"…\"\r\n+      : \"\");\r\n+\r\n   return (\r\n     <div className=\"feature-post-item style-list hover-image-translate\">\r\n       <div className=\"img-style w-100\">\r\n-        {img ? (\r\n-          <Image\r\n-            className=\"lazyload w-100\"\r\n-            decoding=\"async\"\r\n-            loading=\"lazy\"\r\n-            src={img}\r\n-            sizes=\"(max-width: 651px) 100vw, 651px\"\r\n-            width={651}\r\n-            height={367}\r\n-            alt={title}\r\n-          />\r\n-        ) : null}\r\n-\r\n+        <Image\r\n+          className=\"lazyload w-100\"\r\n+          decoding=\"async\"\r\n+          loading=\"lazy\"\r\n+          src={img}\r\n+          sizes=\"(max-width: 651px) 100vw, 651px\"\r\n+          width={651}\r\n+          height={367}\r\n+          alt={post.title}\r\n+        />\r\n         <div className=\"wrap-tag\">\r\n-          <Link href={catHref} className=\"tag categories text-caption-2 text_white\">\r\n-            {categoryName}\r\n+          <Link href={`/categories-1`} className=\"tag categories text-caption-2 text_white\">\r\n+            {catLabel}\r\n           </Link>\r\n           <div className=\"tag time text-caption-2 text_white\">\r\n             <i className=\"icon-Timer\" /> 4 Mins read\r\n           </div>\r\n         </div>\r\n-\r\n-        <Link href={blogHref} className=\"overlay-link\" />\r\n+        <Link href={href} className=\"overlay-link\" />\r\n       </div>\r\n \r\n       <div className=\"content\">\r\n         <div className=\"heading\">\r\n           <ul className=\"meta-feature fw-7 d-flex mb_16 text-body-1\">\r\n             <li>{date}</li>\r\n             <li>\r\n               <span className=\"text_secodary2-color\">POST BY</span>{\" \"}\r\n-              <a href=\"#\" className=\"link\">\r\n-                {author}\r\n-              </a>\r\n+              <a className=\"link\">{author}</a>\r\n             </li>\r\n           </ul>\r\n \r\n           <h3 className=\"title\">\r\n-            <Link href={blogHref} className=\"link\">\r\n-              {title}\r\n+            <Link href={href} className=\"link\">\r\n+              {post.title}\r\n             </Link>\r\n           </h3>\r\n \r\n-          {excerpt ? <p className=\"text-body-1 blog-card-4-desc\">{excerpt}</p> : null}\r\n+          <p className=\"text-body-1 blog-card-4-desc\">{excerpt}</p>\r\n         </div>\r\n \r\n-        <Link href={blogHref} className=\"hover-underline-link text-body-1 fw-7 text_on-surface-color\">\r\n+        <Link href={href} className=\"hover-underline-link text-body-1 fw-7 text_on-surface-color\">\r\n           Read More\r\n         </Link>\r\n       </div>\r\n     </div>\r\n   );\r\n }\r\n-\r\n-// helpers\r\n-function fmtDate(iso?: string) {\r\n-  if (!iso) return \"\";\r\n-  try {\r\n-    return new Date(iso).toLocaleDateString(\"en-GB\", {\r\n-      day: \"2-digit\",\r\n-      month: \"short\",\r\n-      year: \"numeric\",\r\n-    });\r\n-  } catch {\r\n-    return \"\";\r\n-  }\r\n-}\r\n-\r\n-function plain(html = \"\", max = 140) {\r\n-  const s = html.replace(/<[^>]*>/g, \" \").replace(/\\s+/g, \" \").trim();\r\n-  return s.length > max ? s.slice(0, max) + \"…\" : s;\r\n-}\r\n"
                }
            ],
            "date": 1762538594503,
            "name": "Commit-0",
            "content": "import Image from \"next/image\";\r\nimport Link from \"next/link\";\r\n\r\n// Accept either the old demo BlogPost or your API Blog\r\ntype AnyPost = {\r\n  // demo props\r\n  id?: string;\r\n  imgSrc?: string;\r\n  author?: string;\r\n  date?: string;\r\n  excerpt?: string;\r\n  category?: string | { name?: string; slug?: string };\r\n\r\n  // api props\r\n  _id?: string;\r\n  slug?: string;\r\n  title: string;\r\n  postedBy?: string;\r\n  mainImage?: { url?: string };\r\n  createdAt?: string;\r\n  contentHtml?: string;\r\n};\r\n\r\nexport default function BlogCard4({ post }: { post: AnyPost }) {\r\n  // normalize fields\r\n  const slug = post.slug ?? post.id ?? \"\";\r\n  const img =\r\n    post.mainImage?.url ??\r\n    post.imgSrc ??\r\n    \"\"; // leave empty => no image tag rendered\r\n\r\n  const author = post.postedBy ?? post.author ?? \"\";\r\n  const date = post.date ?? fmtDate(post.createdAt);\r\n  const title = post.title;\r\n  const excerpt =\r\n    post.excerpt ?? plain(post.contentHtml || \"\", 220);\r\n\r\n  // category can be string or object\r\n  const categoryName =\r\n    typeof post.category === \"string\"\r\n      ? post.category\r\n      : post.category?.name || \"\";\r\n  const categorySlug =\r\n    typeof post.category === \"string\"\r\n      ? undefined\r\n      : post.category?.slug;\r\n\r\n  const blogHref = slug ? `/blog/${slug}` : \"#\";\r\n  const catHref = categorySlug ? `/categories/${categorySlug}` : `/categories-1`;\r\n\r\n  return (\r\n    <div className=\"feature-post-item style-list hover-image-translate\">\r\n      <div className=\"img-style w-100\">\r\n        {img ? (\r\n          <Image\r\n            className=\"lazyload w-100\"\r\n            decoding=\"async\"\r\n            loading=\"lazy\"\r\n            src={img}\r\n            sizes=\"(max-width: 651px) 100vw, 651px\"\r\n            width={651}\r\n            height={367}\r\n            alt={title}\r\n          />\r\n        ) : null}\r\n\r\n        <div className=\"wrap-tag\">\r\n          <Link href={catHref} className=\"tag categories text-caption-2 text_white\">\r\n            {categoryName}\r\n          </Link>\r\n          <div className=\"tag time text-caption-2 text_white\">\r\n            <i className=\"icon-Timer\" /> 4 Mins read\r\n          </div>\r\n        </div>\r\n\r\n        <Link href={blogHref} className=\"overlay-link\" />\r\n      </div>\r\n\r\n      <div className=\"content\">\r\n        <div className=\"heading\">\r\n          <ul className=\"meta-feature fw-7 d-flex mb_16 text-body-1\">\r\n            <li>{date}</li>\r\n            <li>\r\n              <span className=\"text_secodary2-color\">POST BY</span>{\" \"}\r\n              <a href=\"#\" className=\"link\">\r\n                {author}\r\n              </a>\r\n            </li>\r\n          </ul>\r\n\r\n          <h3 className=\"title\">\r\n            <Link href={blogHref} className=\"link\">\r\n              {title}\r\n            </Link>\r\n          </h3>\r\n\r\n          {excerpt ? <p className=\"text-body-1 blog-card-4-desc\">{excerpt}</p> : null}\r\n        </div>\r\n\r\n        <Link href={blogHref} className=\"hover-underline-link text-body-1 fw-7 text_on-surface-color\">\r\n          Read More\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// helpers\r\nfunction fmtDate(iso?: string) {\r\n  if (!iso) return \"\";\r\n  try {\r\n    return new Date(iso).toLocaleDateString(\"en-GB\", {\r\n      day: \"2-digit\",\r\n      month: \"short\",\r\n      year: \"numeric\",\r\n    });\r\n  } catch {\r\n    return \"\";\r\n  }\r\n}\r\n\r\nfunction plain(html = \"\", max = 140) {\r\n  const s = html.replace(/<[^>]*>/g, \" \").replace(/\\s+/g, \" \").trim();\r\n  return s.length > max ? s.slice(0, max) + \"…\" : s;\r\n}\r\n"
        }
    ]
}