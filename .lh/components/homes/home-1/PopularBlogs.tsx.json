{
    "sourceFile": "components/homes/home-1/PopularBlogs.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1762371437287,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1762450669171,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,9 +36,10 @@\n \r\n // map API -> BlogCard1 props\r\n function toCard1(b: Blog) {\r\n   return {\r\n-    id: b.slug,                             // BlogCard1 links use post.id\r\n+    id: b.slug,   \r\n+    slug: b.slug,                           // BlogCard1 links use post.id\r\n     imgSrc: b.mainImage?.url || \"\",\r\n     category: b.category?.name || \"\",\r\n     author: b.postedBy || \"\",\r\n     date: fmtDate(b.createdAt),\r\n"
                }
            ],
            "date": 1762371437287,
            "name": "Commit-0",
            "content": "\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { Swiper, SwiperSlide } from \"swiper/react\";\r\nimport { Navigation, Pagination } from \"swiper/modules\";\r\nimport BlogCard1 from \"@/components/blog-cards/BlogCard1\";\r\n\r\ntype Blog = {\r\n  _id: string;\r\n  slug: string;\r\n  title: string;\r\n  postedBy?: string;\r\n  mainImage?: { url?: string };\r\n  category?: { name?: string; slug?: string };\r\n  createdAt?: string;\r\n  contentHtml?: string;\r\n};\r\n\r\n// helpers\r\nfunction fmtDate(iso?: string) {\r\n  if (!iso) return \"\";\r\n  try {\r\n    return new Date(iso).toLocaleDateString(\"en-GB\", {\r\n      day: \"2-digit\",\r\n      month: \"short\",\r\n      year: \"numeric\",\r\n    });\r\n  } catch {\r\n    return \"\";\r\n  }\r\n}\r\nfunction plain(html = \"\", max = 120) {\r\n  const s = html.replace(/<[^>]*>/g, \" \").replace(/\\s+/g, \" \").trim();\r\n  return s.length > max ? s.slice(0, max) + \"â€¦\" : s;\r\n}\r\n\r\n// map API -> BlogCard1 props\r\nfunction toCard1(b: Blog) {\r\n  return {\r\n    id: b.slug,                             // BlogCard1 links use post.id\r\n    imgSrc: b.mainImage?.url || \"\",\r\n    category: b.category?.name || \"\",\r\n    author: b.postedBy || \"\",\r\n    date: fmtDate(b.createdAt),\r\n    title: b.title,\r\n    excerpt: plain(b.contentHtml || \"\", 140),\r\n  };\r\n}\r\n\r\nexport default function PopularBlogs() {\r\n  const [items, setItems] = useState<any[]>([]);\r\n\r\n  useEffect(() => {\r\n    const ctrl = new AbortController();\r\n    const base = process.env.NEXT_PUBLIC_API_BASE!;\r\n    fetch(`${base}/api/blogs?section=most_popular&limit=10`, { signal: ctrl.signal })\r\n      .then(async (r) => {\r\n        if (!r.ok) throw new Error(await r.text());\r\n        return r.json();\r\n      })\r\n      .then((rows: Blog[]) => setItems(rows.map(toCard1)))\r\n      .catch(() => {});\r\n    return () => ctrl.abort();\r\n  }, []);\r\n\r\n  if (!items.length) return null;\r\n\r\n  return (\r\n    <div className=\"section-most-popular tf-spacing-1\">\r\n      <div className=\"tf-container sw-layout\">\r\n        <div className=\"heading-section d-flex justify-content-between mb_28\">\r\n          <h3>Most Popular</h3>\r\n          <div className=\"wrap-sw-button d-flex gap_12 md-hide\">\r\n            <div className=\"sw-button sz-56 v2 style-cycle nav-prev-layout snbp6\">\r\n              <i className=\"icon-CaretLeft\" />\r\n            </div>\r\n            <div className=\"sw-button sz-56 v2 style-cycle nav-next-layout snbn6\">\r\n              <i className=\"icon-CaretRight\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <Swiper\r\n          className=\"swiper\"\r\n          spaceBetween={15}\r\n          breakpoints={{\r\n            0: { slidesPerView: 1 },\r\n            575: { slidesPerView: 2 },\r\n            768: { slidesPerView: 3, spaceBetween: 24 },\r\n            992: { slidesPerView: 3, spaceBetween: 40 },\r\n            1200: { slidesPerView: 5, spaceBetween: 40 },\r\n          }}\r\n          modules={[Navigation, Pagination]}\r\n          pagination={{ clickable: true, el: \".spd6\" }}\r\n          navigation={{ prevEl: \".snbp6\", nextEl: \".snbn6\" }}\r\n        >\r\n          {items.map((post) => (\r\n            <SwiperSlide className=\"swiper-slide\" key={post.id}>\r\n              <BlogCard1 post={post} />\r\n            </SwiperSlide>\r\n          ))}\r\n          <div className=\"sw-dots sw-pagination-layout mt_22 justify-content-center d-flex d-md-none spd6\" />\r\n        </Swiper>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"
        }
    ]
}